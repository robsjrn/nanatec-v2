var propertymanager;propertymanager=angular.module("propertymanagerApp",["ngRoute","angularUtils.directives.dirPagination","ngDialog","templates","xeditable"]),propertymanager.factory("authInterceptor",["$window","$location",function(t,e){return{request:function(r){return r.headers=r.headers||{},t.sessionStorage.token?r.headers.token=t.sessionStorage.token:e.path("/unathorised"),r},response:function(t){return 401===t.status&&e.path("/unathorised"),t||$q.when(t)}}}]),propertymanager.config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,r){r.interceptors.push("authInterceptor"),t.when("/",{templateUrl:"property_manager/views/dashboard.html",controller:"dashboardCtrl"}).when("/properties",{templateUrl:"property_manager/views/properties.html",controller:"PropertyCtrl"}).when("/edit-property/:property",{templateUrl:"Editproperty.html",controller:"EditPropertyCtrl"}).when("/units/:propertyname/:propertyid",{templateUrl:"property_manager/views/units.html",controller:"unitCtrl"}).when("/units-settings/:unitname/:unitid/:amount",{templateUrl:"unit-settings.html",controller:"unitSettingsCtrl"}).when("/tenants",{templateUrl:"property_manager/views/tenants.html",controller:"tenantsCtrl"}).when("/checkin/:tenantid",{templateUrl:"checkin.html",controller:"checkinCtrl"}).when("/singletrxn",{templateUrl:"property_manager/views/singletrxn.html",controller:"singletrxnCtrl"}).when("/batchtrxn",{templateUrl:"property_manager/views/batchtrxn.html",controller:"batchtrxnCtrl"}).when("/unathorised",{templateUrl:"401.html"}).when("/not-found",{templateUrl:"404.html"}).otherwise({redirectTo:"/not-found"})}]),propertymanager.run(["$rootScope","$location","$window","$route","editableOptions",function(t,e,r,n,o){o.theme="bs3",t.$on("$locationChangeStart",function(t,n,o){var a=JSON.parse(r.sessionStorage.allowedpath);console.log("paths "+a);e.path()})}]);
propertymanager.factory("propertyManagerSrv",["$http",function(t){var n="/web/propertymanager",e={propertyExist:function(e){var r=t.get(n+"/property/check/"+e);return r},getMyProperties:function(){var e=t.get(n+"/property");return e},addProperty:function(e){var r=t.post(n+"/property",e);return r},getPropertyDetails:function(e){var r=t.get(n+"/property/"+e);return r},updateProperty:function(e){var r=t.put(n+"/property",e);return r},deleteProperty:function(e){var r=t["delete"](n+"/property/"+e);return r},ListAllUnits:function(){var e=t.get(n+"/Unit/All");return e},ListPropertyUnits:function(e){var r=t.get(n+"/Unit/"+e);return r},UnitExist:function(e){var r=t.get(n+"/Unit/check/"+e);return r},addUnit:function(e){var r=t.post(n+"/Unit",e);return r},getUnitDetails:function(e){var r=t.get(n+"/Unit"+e);return r},updateUnit:function(e){var r=t.put(n+"/Unit",e);return r},UpdateUnitSettings:function(e){var r=t.put(n+"/UpdateUnitSettings",e);return r},deleteUnit:function(e){var r=t["delete"](n+"/Unit"+e);return r},vacantUnits:function(){var e=t.get(n+"/vacantUnits");return e},checkTenantContact:function(e){return t.get(n+"/Tenant/contact/"+e)},createTenant:function(e){return console.log(e),t.post(n+"/Tenant",e)},tenantLookup:function(e,r){return t.get(n+"/Tenant/lookup/?searchid="+e+"&lookup="+r)},tenantUpdate:function(e){return t.put(n+"/Tenant",e)},tenantList:function(){return t.get(n+"/Tenant")},DeleteTenant:function(e){return t["delete"](n+"/Tenant/"+e)}};return e}]);
propertymanager.controller("checkinCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(n,t,r,a,o){n.tenantid=o.current.params.tenantid,r.vacantUnits().success(function(t){n.vacantunits=t.vacantunits,console.log(t)}).error(function(n){var r="<p>Error Listing Your Vacant Units (kindly Inform the Administrator) </p>";t.open({template:r,plain:!0})})}]);
propertymanager.controller("dashboardCtrl",["$scope","ngDialog","$window",function(o,r,n){}]);
propertymanager.controller("EditPropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(r,t,p,e,o){r.property=angular.fromJson(atob(o.current.params.property)),r.update=function(r){p.updateProperty(r).success(function(r){var p="<p>Property Successfully Updated </p>";t.open({template:p,plain:!0})}).error(function(r){var p="<p>Error Updating Property (kindly Inform the Administrator) </p>";t.open({template:p,plain:!0})})},r.cancel=function(){e.path("/properties")}}]);
propertymanager.controller("MainCtrl",["$scope","ngDialog","$window",function(o,e,r){o.role=r.sessionStorage.role,o.user=r.sessionStorage.names}]);
propertymanager.controller("PropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location",function(r,e,t,o){t.getMyProperties().success(function(e){r.properties=e.properties,console.log()}).error(function(r){var t="<p>Error Listing Your Properties (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})}),r.editproperty=function(r){var e=btoa(angular.toJson(r));o.path("/edit-property/"+e)},r.viewProperty=function(t){r.viewproperty=t,e.openConfirm({template:"Viewproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(r){},function(r){})},r.addProperty=function(){e.openConfirm({template:"Addproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(o){r.prop=o,t.addProperty(r.prop).success(function(t){r.properties.push(r.prop);var o="<p>Property  Successfully Created </p>";e.open({template:o,plain:!0})}).error(function(r){var t="<p>Error Creating Property (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})})},function(r){})},r.saveproperty=function(){}}]);
propertymanager.controller("tenantsCtrl",["$scope","ngDialog","$window","propertyManagerSrv",function(n,t,e,a){n.tenants=[],a.tenantList().success(function(t){n.tenants=t.tenants}).error(function(n){var e="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})}),n.addTenant=function(){t.openConfirm({template:"AddTenant.html",className:"ngdialog-theme-default",scope:n}).then(function(e){console.log(e),n.ten=e,a.createTenant(n.ten).success(function(e){n.tenants.push(n.ten);var a="<p>Tenant  Successfully Created </p>";t.open({template:a,plain:!0})}).error(function(n){var e="<p>Error Saving Tenant  Details (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})})},function(n){})}}]);
propertymanager.controller("unitCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,n,r,e,p){t.propertyid=p.current.params.propertyid,t.property=p.current.params.propertyname,t.units=[],r.ListPropertyUnits(t.propertyid).success(function(n){t.units=n.units}).error(function(t){var r="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})}),t.addUnit=function(){n.openConfirm({template:"AddUnit.html",className:"ngdialog-theme-default",scope:t}).then(function(e){t.unt=e,t.unt.propertyid=t.propertyid,t.unt.propertyname=t.property,t.unt.occupationStatus="vacant",r.addUnit(t.unt).success(function(r){t.units.push(t.unt);var e="<p>Unit  Successfully Created </p>";n.open({template:e,plain:!0})}).error(function(t){var r="<p>Error Creating Unit (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})})},function(t){})}}]);
propertymanager.controller("unitSettingsCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,n,e,i,a){t.deposit={},t.settings={},t.unitid=a.current.params.unitid,t.unitname=a.current.params.unitname,t.rentamount=Number(a.current.params.amount),t.calcRentDeposit=function(n){"depositamount"===n?t.deposit.amount=t.rentamount:"depositrentpercentage"===n?t.deposit.amount=t.percentage*t.rentamount/100:"depositfixedamount"===n&&(t.deposit.amount=t.fixedamount)},t.calcCheckinAmount=function(n){"rentonly"===n?t.settings.checkinamount=t.rentamount:"rentanddeposit"===n?t.settings.checkinamount=t.deposit.amount+t.rentamount:"checkinfixedamount"===n&&(t.settings.checkinamount=t.tenantcheckinfixedamount)},t.update=function(){t.update={},t.update.settings=t.settings,t.update._id=t.unitid,e.UpdateUnitSettings(t.update).success(function(t){var e="<p>Unit  Settings Successfully Created </p>";n.open({template:e,plain:!0})}).error(function(t){var e="<p>Error Creating Unit  Settings (kindly Inform the Administrator) </p>";n.open({template:e,plain:!0})})}}]);
propertymanager.directive("errSrc",function(){return{link:function(r,e,c){e.bind("error",function(){c.src!=c.errSrc&&c.$set("src",c.errSrc)}),c.$observe("ngSrc",function(r){!r&&c.errSrc&&c.$set("src",c.errSrc)})}}});
propertymanager.directive("ngFileModel",[function(){return{scope:{ngFileModel:"="},link:function(e,t,i){t.bind("change",function(t){var i=new FileReader;i.onload=function(i){e.$apply(function(){e.ngFileModel={lastModified:t.target.files[0].lastModified,lastModifiedDate:t.target.files[0].lastModifiedDate,name:t.target.files[0].name,size:t.target.files[0].size,type:t.target.files[0].type,data:i.target.result}})},i.readAsDataURL(t.target.files[0])})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3BlcnR5X21hbmFnZXJfYXBwLmpzIiwiaHR0cFNlcnZpY2UuanMiLCJDaGVja2luQ29udHJvbGxlci5qcyIsImRhc2hib2FyZEN0cmwuanMiLCJFZGl0UHJvcGVydHlDb250cm9sbGVyLmpzIiwibWFpbkNvbnRyb2xsZXIuanMiLCJwcm9wZXJ0eUNvbnRyb2xsZXIuanMiLCJUZW5hbnRzQ29udHJvbGxlci5qcyIsIlVuaXRDdHJsLmpzIiwiVW5pdHNTZXR0aW5nc0N0cmwuanMiLCJpbWFnZUVycm9yLmpzIiwiaW5wdXRmaWxlLmpzIl0sIm5hbWVzIjpbInByb3BlcnR5bWFuYWdlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwic2Vzc2lvblN0b3JhZ2UiLCJ0b2tlbiIsInBhdGgiLCJyZXNwb25zZSIsInN0YXR1cyIsIiRxIiwid2hlbiIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkcm9vdFNjb3BlIiwiJHJvdXRlIiwiZWRpdGFibGVPcHRpb25zIiwidGhlbWUiLCIkb24iLCJldmVudCIsIm5leHQiLCJjdXJyZW50IiwicGF0aHMiLCJKU09OIiwicGFyc2UiLCJhbGxvd2VkcGF0aCIsImNvbnNvbGUiLCJsb2ciLCIkaHR0cCIsInVybCIsImRhdGEiLCJwcm9wZXJ0eUV4aXN0IiwicGxvdG5hbWUiLCJwcm9taXNlIiwiZ2V0IiwiZ2V0TXlQcm9wZXJ0aWVzIiwiYWRkUHJvcGVydHkiLCJkZXRhaWxzIiwicG9zdCIsImdldFByb3BlcnR5RGV0YWlscyIsInVwZGF0ZVByb3BlcnR5IiwicHV0IiwiZGVsZXRlUHJvcGVydHkiLCJwcm9wZXJ0eSIsIkxpc3RBbGxVbml0cyIsIkxpc3RQcm9wZXJ0eVVuaXRzIiwicHJvcGVydHlpZCIsIlVuaXRFeGlzdCIsInVuaXRuYW1lIiwiYWRkVW5pdCIsImdldFVuaXREZXRhaWxzIiwidXBkYXRlVW5pdCIsIlVwZGF0ZVVuaXRTZXR0aW5ncyIsImRlbGV0ZVVuaXQiLCJ2YWNhbnRVbml0cyIsImNoZWNrVGVuYW50Q29udGFjdCIsImNvbnRhY3QiLCJjcmVhdGVUZW5hbnQiLCJ0ZW5hbnQiLCJ0ZW5hbnRMb29rdXAiLCJzZWFyY2hpZCIsImxvb2t1cCIsInRlbmFudFVwZGF0ZSIsInRlbmFudExpc3QiLCJEZWxldGVUZW5hbnQiLCJ0ZW5hbnRpZCIsIiRzY29wZSIsIm5nRGlhbG9nIiwicHJvcGVydHlNYW5hZ2VyU3J2IiwicGFyYW1zIiwic3VjY2VzcyIsInZhY2FudHVuaXRzIiwiZXJyb3IiLCJ0ZW1wIiwib3BlbiIsInRlbXBsYXRlIiwicGxhaW4iLCJmcm9tSnNvbiIsImF0b2IiLCJ1cGRhdGUiLCJwcm9wIiwiY2FuY2VsIiwicm9sZSIsInVzZXIiLCJuYW1lcyIsInByb3BlcnRpZXMiLCJlZGl0cHJvcGVydHkiLCJkZXQiLCJidG9hIiwidG9Kc29uIiwidmlld1Byb3BlcnR5Iiwidmlld3Byb3BlcnR5Iiwib3BlbkNvbmZpcm0iLCJjbGFzc05hbWUiLCJzY29wZSIsInRoZW4iLCJ2YWx1ZSIsInJlYXNvbiIsInNhdmVwcm9wZXJ0eSIsInRlbmFudHMiLCJhZGRUZW5hbnQiLCJ0ZW4iLCJwcm9wZXJ0eW5hbWUiLCJ1bml0cyIsInVudCIsIm9jY3VwYXRpb25TdGF0dXMiLCJkZXBvc2l0Iiwic2V0dGluZ3MiLCJ1bml0aWQiLCJyZW50YW1vdW50IiwiTnVtYmVyIiwiYW1vdW50IiwiY2FsY1JlbnREZXBvc2l0IiwicGVyY2VudGFnZSIsImZpeGVkYW1vdW50IiwiY2FsY0NoZWNraW5BbW91bnQiLCJjaGVja2luYW1vdW50IiwidGVuYW50Y2hlY2tpbmZpeGVkYW1vdW50IiwiX2lkIiwiZGlyZWN0aXZlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJzcmMiLCJlcnJTcmMiLCIkc2V0IiwiJG9ic2VydmUiLCJuZ0ZpbGVNb2RlbCIsImF0dHJpYnV0ZXMiLCJjaGFuZ2VFdmVudCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJsb2FkRXZlbnQiLCIkYXBwbHkiLCJsYXN0TW9kaWZpZWQiLCJ0YXJnZXQiLCJmaWxlcyIsImxhc3RNb2RpZmllZERhdGUiLCJuYW1lIiwic2l6ZSIsInR5cGUiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxnQkFFSkEsaUJBQWlCQyxRQUFRQyxPQUFPLHNCQUF1QixVQUFVLHdDQUF3QyxXQUFXLFlBQVksY0FJNUhGLGdCQUFnQkcsUUFBUSxtQkFBbUIsVUFBVSxZQUFZLFNBQVdDLEVBQVFDLEdBQ2xGLE9BQ0FDLFFBQVMsU0FBVUMsR0FVakIsTUFSQUEsR0FBT0MsUUFBVUQsRUFBT0MsWUFDcEJKLEVBQVFLLGVBQWVDLE1BQzNCSCxFQUFPQyxRQUFRRSxNQUFRTixFQUFRSyxlQUFlQyxNQUlsQ0wsRUFBVU0sS0FBSyxnQkFFcEJKLEdBRVRLLFNBQVUsU0FBVUEsR0FNbEIsTUFMd0IsT0FBcEJBLEVBQVNDLFFBRWJSLEVBQVVNLEtBQUssZ0JBR1JDLEdBQVlFLEdBQUdDLEtBQUtILFFBTW5DWixnQkFBZ0JPLFFBQVEsaUJBQWtCLG9CQUFvQixnQkFBaUIsU0FBU1MsRUFBZ0JDLEVBQWtCQyxHQUUxSEEsRUFBY0MsYUFBYUMsS0FBSyxtQkFFOUJKLEVBQ0tELEtBQUssS0FDSE0sWUFBYyx3Q0FDYkMsV0FBYyxrQkFFakJQLEtBQUssZUFDSE0sWUFBYyx5Q0FDYkMsV0FBYyxpQkFFakJQLEtBQUssNEJBQ0hNLFlBQWMsb0JBQ2JDLFdBQWMscUJBRWhCUCxLQUFLLG9DQUNKTSxZQUFjLG9DQUNiQyxXQUFjLGFBRWhCUCxLQUFLLDZDQUNKTSxZQUFjLHFCQUNiQyxXQUFjLHFCQUVoQlAsS0FBSyxZQUNKTSxZQUFjLHNDQUNiQyxX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Q2xDQyxLQUFNWCxFQUFZTyxPQUFPQyxNQUFNLEdBQUdHLEtBQ2xDQyxLQUFNWixFQUFZTyxPQUFPQyxNQUFNLEdBQUdJLEtBQ2xDaEgsS0FBTXdHLEVBQVVHLE9BQU9NLFdBSW5DWixFQUFPYSxjQUFjZCxFQUFZTyxPQUFPQyxNQUFNIiwiZmlsZSI6InByb3BlcnR5TWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgcHJvcGVydHltYW5hZ2VyO1xyXG5cclxucHJvcGVydHltYW5hZ2VyPSBhbmd1bGFyLm1vZHVsZSgncHJvcGVydHltYW5hZ2VyQXBwJywgWyduZ1JvdXRlJywnYW5ndWxhclV0aWxzLmRpcmVjdGl2ZXMuZGlyUGFnaW5hdGlvbicsJ25nRGlhbG9nJywndGVtcGxhdGVzJywneGVkaXRhYmxlJ10gKTsgXHJcblxyXG5cclxuXHJcbiAgICBwcm9wZXJ0eW1hbmFnZXIuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJyxbJyR3aW5kb3cnLCckbG9jYXRpb24nLGZ1bmN0aW9uICggJHdpbmRvdywkbG9jYXRpb24pIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgaWYgKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4pIHtcclxuICAgICAgICBjb25maWcuaGVhZGVycy50b2tlbj0gICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICBlbHNle1xyXG4gICAgICAgICAgIC8vIG5vIHRva2VuIGluIFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91bmF0aG9yaXNlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICB9LFxyXG4gICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXHJcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91bmF0aG9yaXNlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XHJcbiAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcblxyXG5wcm9wZXJ0eW1hbmFnZXIuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCRodHRwUHJvdmlkZXIpe1xyXG4gIFxyXG4kaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuXHJcbiAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvZGFzaGJvYXJkLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnZGFzaGJvYXJkQ3RybCdcclxuICAgICAgICB9KSAgXHJcbiAgICAgIC53aGVuKCcvcHJvcGVydGllcycsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAncHJvcGVydHlfbWFuYWdlci92aWV3cy9wcm9wZXJ0aWVzLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnUHJvcGVydHlDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIC53aGVuKCcvZWRpdC1wcm9wZXJ0eS86cHJvcGVydHknLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ0VkaXRwcm9wZXJ0eS5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ0VkaXRQcm9wZXJ0eUN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgIC53aGVuKCcvdW5pdHMvOnByb3BlcnR5bmFtZS86cHJvcGVydHlpZCcsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAncHJvcGVydHlfbWFuYWdlci92aWV3cy91bml0cy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ3VuaXRDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL3VuaXRzLXNldHRpbmdzLzp1bml0bmFtZS86dW5pdGlkLzphbW91bnQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3VuaXQtc2V0dGluZ3MuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICd1bml0U2V0dGluZ3NDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL3RlbmFudHMnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvdGVuYW50cy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ3RlbmFudHNDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL2NoZWNraW4vOnRlbmFudGlkJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdjaGVja2luLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnY2hlY2tpbkN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgIC53aGVuKCcvc2luZ2xldHJ4bicsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAncHJvcGVydHlfbWFuYWdlci92aWV3cy9zaW5nbGV0cnhuLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnc2luZ2xldHJ4bkN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgIC53aGVuKCcvYmF0Y2h0cnhuJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9wZXJ0eV9tYW5hZ2VyL3ZpZXdzL2JhdGNodHJ4bi5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ2JhdGNodHJ4bkN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL3VuYXRob3Jpc2VkJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICc0MDEuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvbm90LWZvdW5kJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICc0MDQuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgXHJcbiBcclxuICAgIC5vdGhlcndpc2UoeyByZWRpcmVjdFRvIDogJy9ub3QtZm91bmQnIH0pO1xyXG5cclxuICAvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgIFxyXG5cclxufV0pO1xyXG5cclxuXHJcbnByb3BlcnR5bWFuYWdlci5ydW4oWyckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckd2luZG93JywnJHJvdXRlJywnZWRpdGFibGVPcHRpb25zJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCR3aW5kb3csJHJvdXRlLGVkaXRhYmxlT3B0aW9ucyl7XHJcbiAgIGVkaXRhYmxlT3B0aW9ucy50aGVtZSA9ICdiczMnOyBcclxuXHJcbiAgJHJvb3RTY29wZS4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLCBmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCl7XHJcblxyXG5cclxuICAgdmFyIHBhdGhzPSBKU09OLnBhcnNlKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuYWxsb3dlZHBhdGgpO1xyXG4gIC8vIGNvbnNvbGUubG9nKFwibmV4dCBcIiArIG5leHQpO1xyXG5cclxuICAgY29uc29sZS5sb2coXCJwYXRocyBcIiArIHBhdGhzKTtcclxuICAgdmFyIG5leHRQYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuIC8vICBjb25zb2xlLmxvZyhcIm5leHQgcGF0aCAgXCIgKyBuZXh0UGF0aCk7XHJcbiAgICAgICAgIC8qICBmdW5jdGlvbiBmaW5kQnlJZChzb3VyY2UsIGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgXHJcbiAgICAgIGlmIChmaW5kQnlJZChwYXRocyxuZXh0UGF0aCApKXtcclxuICAgICAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdW5hdGhvcmlzZWQnKTtcclxuICAgICAgICAvLyAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICBcclxuICAgICovXHJcblxyXG5cclxuXHJcbiAgIFxyXG4gIH0pO1xyXG4gIFxyXG5cclxufV0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJwcm9wZXJ0eW1hbmFnZXIuZmFjdG9yeSgncHJvcGVydHlNYW5hZ2VyU3J2JywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblxyXG4gdmFyIHVybD0nL3dlYi9wcm9wZXJ0eW1hbmFnZXInO1xyXG5cdHZhciBkYXRhID0ge1xyXG5cclxuXHRcdC8qICBQcm9wZXJ0eSAqL1xyXG4gICAgICAgICBwcm9wZXJ0eUV4aXN0OiBmdW5jdGlvbihwbG90bmFtZSkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvcHJvcGVydHkvY2hlY2svJytwbG90bmFtZSlcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCBnZXRNeVByb3BlcnRpZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvcHJvcGVydHknKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cclxuICAgICAgICAgYWRkUHJvcGVydHk6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAucG9zdCh1cmwgKyAnL3Byb3BlcnR5JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIGdldFByb3BlcnR5RGV0YWlsczogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5nZXQodXJsICsgJy9wcm9wZXJ0eS8nK2RldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgdXBkYXRlUHJvcGVydHk6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAucHV0KHVybCArICcvcHJvcGVydHknLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uKHByb3BlcnR5KSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLmRlbGV0ZSh1cmwgKyAnL3Byb3BlcnR5LycrcHJvcGVydHkpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHJcblx0XHQgLyogIFVuaXRzICAqL1xyXG5cclxuXHRcdExpc3RBbGxVbml0czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KHVybCsgJy9Vbml0L0FsbCcpXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgTGlzdFByb3BlcnR5VW5pdHM6IGZ1bmN0aW9uKHByb3BlcnR5aWQpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAkaHR0cC5nZXQodXJsKyAnL1VuaXQvJytwcm9wZXJ0eWlkKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cclxuXHJcblx0XHQgVW5pdEV4aXN0OiBmdW5jdGlvbih1bml0bmFtZSkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvVW5pdC9jaGVjay8nK3VuaXRuYW1lKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cdFxyXG4gICAgICAgICBhZGRVbml0OiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLnBvc3QodXJsICsgJy9Vbml0JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIGdldFVuaXREZXRhaWxzOiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLmdldCh1cmwgKyAnL1VuaXQnK2RldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgdXBkYXRlVW5pdDogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wdXQodXJsICsgJy9Vbml0JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIFVwZGF0ZVVuaXRTZXR0aW5nczogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wdXQodXJsICsgJy9VcGRhdGVVbml0U2V0dGluZ3MnLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCBcclxuICAgICAgICAgZGVsZXRlVW5pdDogZnVuY3Rpb24odW5pdG5hbWUpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAuZGVsZXRlKHVybCArICcvVW5pdCcrdW5pdG5hbWUpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCAgdmFjYW50VW5pdHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5nZXQodXJsICsgJy92YWNhbnRVbml0cycpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHJcblx0XHJcbiAgICAgICAgICAgIGNoZWNrVGVuYW50Q29udGFjdDpmdW5jdGlvbiAoY29udGFjdCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2NvbnRhY3QvJysgY29udGFjdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50KSB7XHJcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2codGVuYW50KVxyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwgKyAnL1RlbmFudCcsdGVuYW50KTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICB0ZW5hbnRMb29rdXA6ZnVuY3Rpb24gKHNlYXJjaGlkLGxvb2t1cCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2xvb2t1cC8/c2VhcmNoaWQ9JytzZWFyY2hpZCsnJmxvb2t1cD0nK2xvb2t1cCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbmFudFVwZGF0ZTpmdW5jdGlvbiAoZGV0YWlscykge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucHV0KHVybCArICcvVGVuYW50JyxkZXRhaWxzKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGVuYW50TGlzdDpmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgIHJldHVybiAkaHR0cC5nZXQodXJsICsgJy9UZW5hbnQnKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIERlbGV0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50aWQpIHtcclxuXHRcdCAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSh1cmwgKyAnL1RlbmFudC8nK3RlbmFudGlkKTsgXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgIH1cclxuXHRyZXR1cm4gZGF0YTtcclxufV0pO1xyXG4iLCJcclxuXHJcbnByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCdjaGVja2luQ3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAgJHNjb3BlLnRlbmFudGlkPSRyb3V0ZS5jdXJyZW50LnBhcmFtcy50ZW5hbnRpZDtcclxuXHJcblxyXG4gICBcclxuXHJcblxyXG4gICAgcHJvcGVydHlNYW5hZ2VyU3J2LnZhY2FudFVuaXRzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZhY2FudHVuaXRzPWRhdGEudmFjYW50dW5pdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIExpc3RpbmcgWW91ciBWYWNhbnQgVW5pdHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHJcblx0fV0pOyIsIlxyXG5cclxucHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ2Rhc2hib2FyZEN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywnJHdpbmRvdycsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZywkd2luZG93KXtcclxuXHJcblxyXG4gICAgXHJcblx0fV0pO1xyXG4iLCJwcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignRWRpdFByb3BlcnR5Q3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5PWFuZ3VsYXIuZnJvbUpzb24oYXRvYigkcm91dGUuY3VycmVudC5wYXJhbXMucHJvcGVydHkpKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS51cGRhdGU9ZnVuY3Rpb24ocHJvcCl7XHJcblxyXG4gICAgICAgICAgICBcdHByb3BlcnR5TWFuYWdlclNydi51cGRhdGVQcm9wZXJ0eShwcm9wKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5Qcm9wZXJ0eSBTdWNjZXNzZnVsbHkgVXBkYXRlZCA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pXHJcblx0XHRcdFx0ICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIFVwZGF0aW5nIFByb3BlcnR5IChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBcdCRsb2NhdGlvbi5wYXRoKCcvcHJvcGVydGllcycpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICBcclxuXHR9XSk7IiwiXHJcbnByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCdNYWluQ3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCckd2luZG93JywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLCR3aW5kb3cpe1xyXG5cclxuXHJcblx0ICRzY29wZS5yb2xlPSR3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uucm9sZTtcclxuXHQgJHNjb3BlLnVzZXI9JHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5uYW1lcztcclxuXHJcblxyXG5cclxuICAgIFxyXG5cdH1dKTtcclxuIiwiXHJcbnByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCdQcm9wZXJ0eUN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywncHJvcGVydHlNYW5hZ2VyU3J2JywnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLHByb3BlcnR5TWFuYWdlclNydiwkbG9jYXRpb24pe1xyXG5cclxuICBcclxuXHJcbiAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuZ2V0TXlQcm9wZXJ0aWVzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0aWVzPWRhdGEucHJvcGVydGllcztcclxuXHRcdFx0XHQgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpO1xyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pXHJcblx0XHRcdFx0ICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIExpc3RpbmcgWW91ciBQcm9wZXJ0aWVzIChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgIH0pOyAgIFxyXG4gICAgICAgICAgICRzY29wZS5lZGl0cHJvcGVydHk9ZnVuY3Rpb24ocHJvcGVydHkpe1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB2YXIgZGV0PWJ0b2EoYW5ndWxhci50b0pzb24ocHJvcGVydHkpKTtcclxuXHJcbiAgICAgICAgIFx0ICAgICRsb2NhdGlvbi5wYXRoKCcvZWRpdC1wcm9wZXJ0eS8nK2RldCk7XHJcbiAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAkc2NvcGUudmlld1Byb3BlcnR5PWZ1bmN0aW9uKHByb3BlcnR5KXtcclxuICAgICAgICAgXHQgICRzY29wZS52aWV3cHJvcGVydHk9cHJvcGVydHk7XHJcbiAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnVmlld3Byb3BlcnR5Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGVcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgJHNjb3BlLmFkZFByb3BlcnR5PWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdBZGRwcm9wZXJ0eS5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZ2RpYWxvZy10aGVtZS1kZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvcD12YWx1ZTtcclxuICAgICAgICAgICAgICAgIFx0cHJvcGVydHlNYW5hZ2VyU3J2LmFkZFByb3BlcnR5KCRzY29wZS5wcm9wKSBcclxuICAgICAgICAgICAgICAgIFx0ICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgXHQgIFx0ICAgICAgJHNjb3BlLnByb3BlcnRpZXMucHVzaCgkc2NvcGUucHJvcCk7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+UHJvcGVydHkgIFN1Y2Nlc3NmdWxseSBDcmVhdGVkIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pXHJcblx0XHRcdFx0ICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIENyZWF0aW5nIFByb3BlcnR5IChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0XHJcbiAgICAgICAgICAgICAgICBcdFx0ICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICRzY29wZS5zYXZlcHJvcGVydHkgPSBmdW5jdGlvbigpIHtcclxuXHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgXHJcblx0fV0pO1xyXG4iLCJwcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcigndGVuYW50c0N0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywnJHdpbmRvdycsJ3Byb3BlcnR5TWFuYWdlclNydicsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZywkd2luZG93LHByb3BlcnR5TWFuYWdlclNydil7XHJcbiAgICRzY29wZS50ZW5hbnRzPVtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYudGVuYW50TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50ZW5hbnRzPWRhdGEudGVuYW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+RXJyb3IgTGlzdGluZyBZb3VyIFVuaXRzIChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICB9KTsgXHJcblxyXG5cclxuICAgICRzY29wZS5hZGRUZW5hbnQ9ZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcdCAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ0FkZFRlbmFudC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZ2RpYWxvZy10aGVtZS1kZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRlbj12YWx1ZTtcclxuICAgICAgICAgICAgICAgIFx0cHJvcGVydHlNYW5hZ2VyU3J2LmNyZWF0ZVRlbmFudCgkc2NvcGUudGVuKSBcclxuICAgICAgICAgICAgICAgIFx0ICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgXHQgIFx0ICAgICAgJHNjb3BlLnRlbmFudHMucHVzaCgkc2NvcGUudGVuKTtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5UZW5hbnQgIFN1Y2Nlc3NmdWxseSBDcmVhdGVkIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pXHJcblx0XHRcdFx0ICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIFNhdmluZyBUZW5hbnQgIERldGFpbHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcblx0XHRcdFx0ICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRcclxuICAgICAgICAgICAgICAgIFx0XHQgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbiAgICBcclxuXHR9XSk7IiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ3VuaXRDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJ3Byb3BlcnR5TWFuYWdlclNydicsJyRsb2NhdGlvbicsJyRyb3V0ZScsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZyxwcm9wZXJ0eU1hbmFnZXJTcnYsJGxvY2F0aW9uLCRyb3V0ZSl7XHJcblxyXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eWlkPSRyb3V0ZS5jdXJyZW50LnBhcmFtcy5wcm9wZXJ0eWlkO1xyXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eT0kcm91dGUuY3VycmVudC5wYXJhbXMucHJvcGVydHluYW1lO1xyXG4gICAgICAgICAgICAkc2NvcGUudW5pdHM9W107XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuTGlzdFByb3BlcnR5VW5pdHMoJHNjb3BlLnByb3BlcnR5aWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51bml0cz1kYXRhLnVuaXRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLnVuaXRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBMaXN0aW5nIFlvdXIgVW5pdHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFkZFVuaXQ9ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ0FkZFVuaXQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVudD12YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW50LnByb3BlcnR5aWQ9JHNjb3BlLnByb3BlcnR5aWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVudC5wcm9wZXJ0eW5hbWU9JHNjb3BlLnByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51bnQub2NjdXBhdGlvblN0YXR1cz1cInZhY2FudFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuYWRkVW5pdCgkc2NvcGUudW50KSBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51bml0cy5wdXNoKCRzY29wZS51bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+VW5pdCAgU3VjY2Vzc2Z1bGx5IENyZWF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIENyZWF0aW5nIFVuaXQgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICBcclxuICAgICAgICAgICAgICAgXHJcblx0fV0pOyIsInByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCd1bml0U2V0dGluZ3NDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJ3Byb3BlcnR5TWFuYWdlclNydicsJyRsb2NhdGlvbicsJyRyb3V0ZScsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZyxwcm9wZXJ0eU1hbmFnZXJTcnYsJGxvY2F0aW9uLCRyb3V0ZSl7XHJcblxyXG4gICRzY29wZS5kZXBvc2l0PXt9O1xyXG4gICRzY29wZS5zZXR0aW5ncz17fTtcclxuXHJcbiAgICAgICAgICAgJHNjb3BlLnVuaXRpZD0kcm91dGUuY3VycmVudC5wYXJhbXMudW5pdGlkO1xyXG4gICAgICAgICAgICRzY29wZS51bml0bmFtZT0kcm91dGUuY3VycmVudC5wYXJhbXMudW5pdG5hbWU7XHJcbiAgICAgICAgICAgJHNjb3BlLnJlbnRhbW91bnQ9TnVtYmVyKCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5hbW91bnQpO1xyXG4gXHJcbiAgICAkc2NvcGUuY2FsY1JlbnREZXBvc2l0PSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgXHRpZiAodmFsdWU9PT0nZGVwb3NpdGFtb3VudCcpeyRzY29wZS5kZXBvc2l0LmFtb3VudD0kc2NvcGUucmVudGFtb3VudDt9XHJcbiAgICBcdGVsc2UgaWYgKHZhbHVlPT09J2RlcG9zaXRyZW50cGVyY2VudGFnZScpe1xyXG4gICAgICAgIFx0XHQkc2NvcGUuZGVwb3NpdC5hbW91bnQ9KCRzY29wZS5wZXJjZW50YWdlICogJHNjb3BlLnJlbnRhbW91bnQpLzEwMDtcclxuICAgIFx0fVxyXG4gICAgXHRlbHNlIGlmKHZhbHVlPT09J2RlcG9zaXRmaXhlZGFtb3VudCcpeyRzY29wZS5kZXBvc2l0LmFtb3VudD0kc2NvcGUuZml4ZWRhbW91bnQ7fVxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FsY0NoZWNraW5BbW91bnQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHQgICAgIGlmICh2YWx1ZT09PSdyZW50b25seScpeyRzY29wZS5zZXR0aW5ncy5jaGVja2luYW1vdW50PSRzY29wZS5yZW50YW1vdW50O31cclxuXHRcdFx0ICAgICBlbHNlIGlmICh2YWx1ZT09PSdyZW50YW5kZGVwb3NpdCcpeyRzY29wZS5zZXR0aW5ncy5jaGVja2luYW1vdW50PSRzY29wZS5kZXBvc2l0LmFtb3VudCArICRzY29wZS5yZW50YW1vdW50O31cclxuXHRcdFx0ICAgICBlbHNlIGlmICh2YWx1ZT09PSdjaGVja2luZml4ZWRhbW91bnQnKXskc2NvcGUuc2V0dGluZ3MuY2hlY2tpbmFtb3VudD0kc2NvcGUudGVuYW50Y2hlY2tpbmZpeGVkYW1vdW50IDt9XHJcblx0XHRcdCAgIH07XHJcblxyXG4gICAgICAkc2NvcGUudXBkYXRlPWZ1bmN0aW9uKCl7XHJcbiAgICAgIFx0JHNjb3BlLnVwZGF0ZT17fTtcclxuICAgICAgXHQkc2NvcGUudXBkYXRlLnNldHRpbmdzPSRzY29wZS5zZXR0aW5ncztcclxuICAgICAgICAkc2NvcGUudXBkYXRlLl9pZD0kc2NvcGUudW5pdGlkO1xyXG4gICAgICAgIHByb3BlcnR5TWFuYWdlclNydi5VcGRhdGVVbml0U2V0dGluZ3MoJHNjb3BlLnVwZGF0ZSkgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+VW5pdCAgU2V0dGluZ3MgU3VjY2Vzc2Z1bGx5IENyZWF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIENyZWF0aW5nIFVuaXQgIFNldHRpbmdzIChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgXHJcbiAgICAgIH07XHJcbiAgICBcclxuXHJcblx0XHR9XSk7IiwicHJvcGVydHltYW5hZ2VyLmRpcmVjdGl2ZSgnZXJyU3JjJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmJpbmQoJ2Vycm9yJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChhdHRycy5zcmMgIT0gYXR0cnMuZXJyU3JjKSB7XHJcbiAgICAgICAgICAgICAgYXR0cnMuJHNldCgnc3JjJywgYXR0cnMuZXJyU3JjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCduZ1NyYycsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghdmFsdWUgJiYgYXR0cnMuZXJyU3JjKSB7XHJcbiAgICAgICAgICAgICAgYXR0cnMuJHNldCgnc3JjJywgYXR0cnMuZXJyU3JjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTsiLCIgICAgcHJvcGVydHltYW5hZ2VyLmRpcmVjdGl2ZShcIm5nRmlsZU1vZGVsXCIsIFtmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG5nRmlsZU1vZGVsOiBcIj1cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZChcImNoYW5nZVwiLCBmdW5jdGlvbiAoY2hhbmdlRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGxvYWRFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUubmdGaWxlTW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubGFzdE1vZGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZERhdGU6IGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXS5sYXN0TW9kaWZpZWREYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXS5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGxvYWRFdmVudC50YXJnZXQucmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoY2hhbmdlRXZlbnQudGFyZ2V0LmZpbGVzWzBdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==