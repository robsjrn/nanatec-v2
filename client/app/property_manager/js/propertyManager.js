var propertymanager;propertymanager=angular.module("propertymanagerApp",["ngRoute","angularUtils.directives.dirPagination","ngDialog","templates","xeditable"]),propertymanager.factory("authInterceptor",["$window","$location",function(t,e){return{request:function(r){return r.headers=r.headers||{},t.sessionStorage.token?r.headers.token=t.sessionStorage.token:e.path("/unathorised"),r},response:function(t){return 401===t.status&&e.path("/unathorised"),t||$q.when(t)}}}]),propertymanager.config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,r){r.interceptors.push("authInterceptor"),t.when("/",{templateUrl:"property_manager/views/dashboard.html",controller:"dashboardCtrl"}).when("/properties",{templateUrl:"property_manager/views/properties.html",controller:"PropertyCtrl"}).when("/edit-property/:property",{templateUrl:"Editproperty.html",controller:"EditPropertyCtrl"}).when("/units/:propertyname/:propertyid",{templateUrl:"property_manager/views/units.html",controller:"unitCtrl"}).when("/units-settings/:unitname/:unitid/:amount",{templateUrl:"unit-settings.html",controller:"unitSettingsCtrl"}).when("/tenants",{templateUrl:"property_manager/views/tenants.html",controller:"tenantsCtrl"}).when("/checkout/:tenantid",{templateUrl:"checkout.html",controller:"checkoutCtrl"}).when("/checkin/:tenantid",{templateUrl:"checkin.html",controller:"checkinCtrl"}).when("/singletrxn",{templateUrl:"property_manager/views/singletrxn.html",controller:"singletrxnCtrl"}).when("/batchtrxn",{templateUrl:"property_manager/views/batchtrxn.html",controller:"batchtrxnCtrl"}).when("/unathorised",{templateUrl:"401.html"}).when("/not-found",{templateUrl:"404.html"}).otherwise({redirectTo:"/not-found"})}]),propertymanager.run(["$rootScope","$location","$window","$route","editableOptions",function(t,e,r,n,o){o.theme="bs3",t.$on("$locationChangeStart",function(t,r,n){e.path()})}]);
propertymanager.factory("propertyManagerSrv",["$http",function(t){var n="/web/propertymanager",e={propertyExist:function(e){var r=t.get(n+"/property/check/"+e);return r},getMyProperties:function(){var e=t.get(n+"/property");return e},addProperty:function(e){var r=t.post(n+"/property",e);return r},getPropertyDetails:function(e){var r=t.get(n+"/property/"+e);return r},updateProperty:function(e){var r=t.put(n+"/property",e);return r},deleteProperty:function(e){var r=t["delete"](n+"/property/"+e);return r},ListAllUnits:function(){var e=t.get(n+"/Unit/All");return e},ListPropertyUnits:function(e){var r=t.get(n+"/Unit/"+e);return r},UnitExist:function(e){var r=t.get(n+"/Unit/check/"+e);return r},addUnit:function(e){var r=t.post(n+"/Unit",e);return r},getUnitDetails:function(e){var r=t.get(n+"/Unit"+e);return r},updateUnit:function(e){var r=t.put(n+"/Unit",e);return r},UpdateUnitSettings:function(e){var r=t.put(n+"/UpdateUnitSettings",e);return r},deleteUnit:function(e){var r=t["delete"](n+"/Unit"+e);return r},vacantUnits:function(){var e=t.get(n+"/vacantUnits");return e},getTenantDetails:function(e){return t.get(n+"/Tenant/id/"+e)},checkTenantContact:function(e){return t.get(n+"/Tenant/contact/"+e)},createTenant:function(e){return console.log(e),t.post(n+"/Tenant",e)},tenantLookup:function(e,r){return t.get(n+"/Tenant/lookup/?searchid="+e+"&lookup="+r)},tenantUpdate:function(e){return t.put(n+"/Tenant",e)},tenantList:function(){return t.get(n+"/Tenant")},DeleteTenant:function(e){return t["delete"](n+"/Tenant/"+e)},checkin:function(e){var r=t.post(n+"/checkin",e);return r}};return e}]);
propertymanager.controller("checkinCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(n,t,e,i,a){n.tenantid=a.current.params.tenantid,n.assignedunits=[],n.dueAmount=0,e.vacantUnits().success(function(t){n.vacantunits=t.vacantunits}).error(function(n){var e="<p>Error Listing Your Vacant Units (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})}),n.assignunit=function(t){n.assignedunits.push(t),n.dueAmount=n.dueAmount+t.amount},n.removeassigment=function(t,e){n.assignedunits.splice(e,1),n.dueAmount=n.dueAmount-t.amount},n.checkin=function(){var i={};i.units=n.assignedunits,i.amountdue=n.dueAmount,i.tenantid=n.tenantid,e.checkin(i).success(function(n){var e="<p>Tenant Checked In </p>";t.open({template:e,plain:!0})}).error(function(n){var e="<p>Error Checking in The Client (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})})}}]);
propertymanager.controller("checkoutCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,e,n,a,r){t.tenantid=r.current.params.tenantid,n.getTenantDetails(t.tenantid).success(function(n){if(n.exist)t.tenantsdetails=n.tenantdetails;else{var a="<p> Tenant Does Not Exist </p>";e.open({template:a,plain:!0})}}).error(function(t){var n="<p>Error Fetching Tenant Details (kindly Inform the Administrator) </p>";e.open({template:n,plain:!0})})}]);
propertymanager.controller("dashboardCtrl",["$scope","ngDialog","$window",function(o,r,n){}]);
propertymanager.controller("EditPropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(r,t,p,e,o){r.property=angular.fromJson(atob(o.current.params.property)),r.update=function(r){p.updateProperty(r).success(function(r){var p="<p>Property Successfully Updated </p>";t.open({template:p,plain:!0})}).error(function(r){var p="<p>Error Updating Property (kindly Inform the Administrator) </p>";t.open({template:p,plain:!0})})},r.cancel=function(){e.path("/properties")}}]);
propertymanager.controller("MainCtrl",["$scope","ngDialog","$window",function(o,e,r){o.role=r.sessionStorage.role,o.user=r.sessionStorage.names}]);
propertymanager.controller("PropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location",function(r,e,t,o){t.getMyProperties().success(function(e){r.properties=e.properties,console.log()}).error(function(r){var t="<p>Error Listing Your Properties (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})}),r.editproperty=function(r){var e=btoa(angular.toJson(r));o.path("/edit-property/"+e)},r.viewProperty=function(t){r.viewproperty=t,e.openConfirm({template:"Viewproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(r){},function(r){})},r.addProperty=function(){e.openConfirm({template:"Addproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(o){r.prop=o,t.addProperty(r.prop).success(function(t){r.properties.push(r.prop);var o="<p>Property  Successfully Created </p>";e.open({template:o,plain:!0})}).error(function(r){var t="<p>Error Creating Property (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})})},function(r){})},r.saveproperty=function(){}}]);
propertymanager.controller("tenantsCtrl",["$scope","ngDialog","$window","propertyManagerSrv",function(n,t,e,a){n.tenants=[],a.tenantList().success(function(t){n.tenants=t.tenants}).error(function(n){var e="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})}),n.addTenant=function(){t.openConfirm({template:"AddTenant.html",className:"ngdialog-theme-default",scope:n}).then(function(e){console.log(e),n.ten=e,a.createTenant(n.ten).success(function(e){n.tenants.push(n.ten);var a="<p>Tenant  Successfully Created </p>";t.open({template:a,plain:!0})}).error(function(n){var e="<p>Error Saving Tenant  Details (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})})},function(n){})}}]);
propertymanager.controller("unitCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,n,r,e,p){t.propertyid=p.current.params.propertyid,t.property=p.current.params.propertyname,t.units=[],r.ListPropertyUnits(t.propertyid).success(function(n){t.units=n.units}).error(function(t){var r="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})}),t.addUnit=function(){n.openConfirm({template:"AddUnit.html",className:"ngdialog-theme-default",scope:t}).then(function(e){t.unt=e,t.unt.propertyid=t.propertyid,t.unt.propertyname=t.property,t.unt.occupationStatus="vacant",r.addUnit(t.unt).success(function(r){t.units.push(t.unt);var e="<p>Unit  Successfully Created </p>";n.open({template:e,plain:!0})}).error(function(t){var r="<p>Error Creating Unit (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})})},function(t){})}}]);
propertymanager.controller("unitSettingsCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,n,e,i,a){t.deposit={},t.settings={},t.unitid=a.current.params.unitid,t.unitname=a.current.params.unitname,t.rentamount=Number(a.current.params.amount),t.calcRentDeposit=function(n){"depositamount"===n?t.deposit.amount=t.rentamount:"depositrentpercentage"===n?t.deposit.amount=t.percentage*t.rentamount/100:"depositfixedamount"===n&&(t.deposit.amount=t.fixedamount)},t.calcCheckinAmount=function(n){"rentonly"===n?t.settings.checkinamount=t.rentamount:"rentanddeposit"===n?t.settings.checkinamount=t.deposit.amount+t.rentamount:"checkinfixedamount"===n&&(t.settings.checkinamount=t.tenantcheckinfixedamount)},t.update=function(){t.update={},t.update.settings=t.settings,t.update._id=t.unitid,e.UpdateUnitSettings(t.update).success(function(t){var e="<p>Unit  Settings Successfully Created </p>";n.open({template:e,plain:!0})}).error(function(t){var e="<p>Error Creating Unit  Settings (kindly Inform the Administrator) </p>";n.open({template:e,plain:!0})})}}]);
propertymanager.directive("errSrc",function(){return{link:function(r,e,c){e.bind("error",function(){c.src!=c.errSrc&&c.$set("src",c.errSrc)}),c.$observe("ngSrc",function(r){!r&&c.errSrc&&c.$set("src",c.errSrc)})}}});
propertymanager.directive("ngFileModel",[function(){return{scope:{ngFileModel:"="},link:function(e,t,i){t.bind("change",function(t){var i=new FileReader;i.onload=function(i){e.$apply(function(){e.ngFileModel={lastModified:t.target.files[0].lastModified,lastModifiedDate:t.target.files[0].lastModifiedDate,name:t.target.files[0].name,size:t.target.files[0].size,type:t.target.files[0].type,data:i.target.result}})},i.readAsDataURL(t.target.files[0])})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3BlcnR5X21hbmFnZXJfYXBwLmpzIiwiaHR0cFNlcnZpY2UuanMiLCJDaGVja2luQ29udHJvbGxlci5qcyIsImNoZWNrb3V0Q3RybC5qcyIsImRhc2hib2FyZEN0cmwuanMiLCJFZGl0UHJvcGVydHlDb250cm9sbGVyLmpzIiwibWFpbkNvbnRyb2xsZXIuanMiLCJwcm9wZXJ0eUNvbnRyb2xsZXIuanMiLCJUZW5hbnRzQ29udHJvbGxlci5qcyIsIlVuaXRDdHJsLmpzIiwiVW5pdHNTZXR0aW5nc0N0cmwuanMiLCJpbWFnZUVycm9yLmpzIiwiaW5wdXRmaWxlLmpzIl0sIm5hbWVzIjpbInByb3BlcnR5bWFuYWdlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwic2Vzc2lvblN0b3JhZ2UiLCJ0b2tlbiIsInBhdGgiLCJyZXNwb25zZSIsInN0YXR1cyIsIiRxIiwid2hlbiIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkcm9vdFNjb3BlIiwiJHJvdXRlIiwiZWRpdGFibGVPcHRpb25zIiwidGhlbWUiLCIkb24iLCJldmVudCIsIm5leHQiLCJjdXJyZW50IiwiJGh0dHAiLCJ1cmwiLCJkYXRhIiwicHJvcGVydHlFeGlzdCIsInBsb3RuYW1lIiwicHJvbWlzZSIsImdldCIsImdldE15UHJvcGVydGllcyIsImFkZFByb3BlcnR5IiwiZGV0YWlscyIsInBvc3QiLCJnZXRQcm9wZXJ0eURldGFpbHMiLCJ1cGRhdGVQcm9wZXJ0eSIsInB1dCIsImRlbGV0ZVByb3BlcnR5IiwicHJvcGVydHkiLCJMaXN0QWxsVW5pdHMiLCJMaXN0UHJvcGVydHlVbml0cyIsInByb3BlcnR5aWQiLCJVbml0RXhpc3QiLCJ1bml0bmFtZSIsImFkZFVuaXQiLCJnZXRVbml0RGV0YWlscyIsInVwZGF0ZVVuaXQiLCJVcGRhdGVVbml0U2V0dGluZ3MiLCJkZWxldGVVbml0IiwidmFjYW50VW5pdHMiLCJnZXRUZW5hbnREZXRhaWxzIiwidGVuYW50aWQiLCJjaGVja1RlbmFudENvbnRhY3QiLCJjb250YWN0IiwiY3JlYXRlVGVuYW50IiwidGVuYW50IiwiY29uc29sZSIsImxvZyIsInRlbmFudExvb2t1cCIsInNlYXJjaGlkIiwibG9va3VwIiwidGVuYW50VXBkYXRlIiwidGVuYW50TGlzdCIsIkRlbGV0ZVRlbmFudCIsImNoZWNraW4iLCIkc2NvcGUiLCJuZ0RpYWxvZyIsInByb3BlcnR5TWFuYWdlclNydiIsInBhcmFtcyIsImFzc2lnbmVkdW5pdHMiLCJkdWVBbW91bnQiLCJzdWNjZXNzIiwidmFjYW50dW5pdHMiLCJlcnJvciIsInRlbXAiLCJvcGVuIiwidGVtcGxhdGUiLCJwbGFpbiIsImFzc2lnbnVuaXQiLCJwcm9wIiwiYW1vdW50IiwicmVtb3ZlYXNzaWdtZW50Iiwic2VsZWN0aW9uIiwiaW5kZXgiLCJzcGxpY2UiLCJ1bml0cyIsImFtb3VudGR1ZSIsImV4aXN0IiwidGVuYW50c2RldGFpbHMiLCJ0ZW5hbnRkZXRhaWxzIiwiZnJvbUpzb24iLCJhdG9iIiwidXBkYXRlIiwiY2FuY2VsIiwicm9sZSIsInVzZXIiLCJuYW1lcyIsInByb3BlcnRpZXMiLCJlZGl0cHJvcGVydHkiLCJkZXQiLCJidG9hIiwidG9Kc29uIiwidmlld1Byb3BlcnR5Iiwidmlld3Byb3BlcnR5Iiwib3BlbkNvbmZpcm0iLCJjbGFzc05hbWUiLCJzY29wZSIsInRoZW4iLCJ2YWx1ZSIsInJlYXNvbiIsInNhdmVwcm9wZXJ0eSIsInRlbmFudHMiLCJhZGRUZW5hbnQiLCJ0ZW4iLCJwcm9wZXJ0eW5hbWUiLCJ1bnQiLCJvY2N1cGF0aW9uU3RhdHVzIiwiZGVwb3NpdCIsInNldHRpbmdzIiwidW5pdGlkIiwicmVudGFtb3VudCIsIk51bWJlciIsImNhbGNSZW50RGVwb3NpdCIsInBlcmNlbnRhZ2UiLCJmaXhlZGFtb3VudCIsImNhbGNDaGVja2luQW1vdW50IiwiY2hlY2tpbmFtb3VudCIsInRlbmFudGNoZWNraW5maXhlZGFtb3VudCIsIl9pZCIsImRpcmVjdGl2ZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJiaW5kIiwic3JjIiwiZXJyU3JjIiwiJHNldCIsIiRvYnNlcnZlIiwibmdGaWxlTW9kZWwiLCJhdHRyaWJ1dGVzIiwiY2hhbmdlRXZlbnQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwibG9hZEV2ZW50IiwiJGFwcGx5IiwibGFzdE1vZGlmaWVkIiwidGFyZ2V0IiwiZmlsZXMiLCJsYXN0TW9kaWZpZWREYXRlIiwibmFtZSIsInNpemUiLCJ0eXBlIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsZ0JBRUpBLGlCQUFpQkMsUUFBUUMsT0FBTyxzQkFBdUIsVUFBVSx3Q0FBd0MsV0FBVyxZQUFZLGNBSTVIRixnQkFBZ0JHLFFBQVEsbUJBQW1CLFVBQVUsWUFBWSxTQUFXQyxFQUFRQyxHQUNsRixPQUNBQyxRQUFTLFNBQVVDLEdBVWpCLE1BUkFBLEdBQU9DLFFBQVVELEVBQU9DLFlBQ3BCSixFQUFRSyxlQUFlQyxNQUMzQkgsRUFBT0MsUUFBUUUsTUFBUU4sRUFBUUssZUFBZUMsTUFJbENMLEVBQVVNLEtBQUssZ0JBRXBCSixHQUVUSyxTQUFVLFNBQVVBLEdBTWxCLE1BTHdCLE9BQXBCQSxFQUFTQyxRQUViUixFQUFVTSxLQUFLLGdCQUdSQyxHQUFZRSxHQUFHQyxLQUFLSCxRQU1uQ1osZ0JBQWdCTyxRQUFRLGlCQUFrQixvQkFBb0IsZ0JBQWlCLFNBQVNTLEVBQWdCQyxFQUFrQkMsR0FFMUhBLEVBQWNDLGFBQWFDLEtBQUssbUJBRTlCSixFQUNLRCxLQUFLLEtBQ0hNLFlBQWMsd0NBQ2JDLFdBQWMsa0JBRWpCUCxLQUFLLGVBQ0hNLFlBQWMseUNB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QUFJQyxHQUFTLEdBQUlDLFdBQ2pCRCxHQUFPRSxPQUFTLFNBQVVDLEdBQ3RCdEMsRUFBTXVDLE9BQU8sV0FDVHZDLEVBQU1nQyxhQUNGUSxhQUFjTixFQUFZTyxPQUFPQyxNQUFNLEdBQUdGLGFBQzFDRyxpQkFBa0JULEVBQVlPLE9BQU9DLE1BQU0sR0FBR0MsaUJBQzlDQyxLQUFNVixFQUFZTyxPQUFPQyxNQUFNLEdBQUdFLEtBQ2xDQyxLQUFNWCxFQUFZTyxPQUFPQyxNQUFNLEdBQUdHLEtBQ2xDQyxLQUFNWixFQUFZTyxPQUFPQyxNQUFNLEdBQUdJLEtBQ2xDL0gsS0FBTXVILEVBQVVHLE9BQU9NLFdBSW5DWixFQUFPYSxjQUFjZCxFQUFZTyxPQUFPQyxNQUFNIiwiZmlsZSI6InByb3BlcnR5TWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgcHJvcGVydHltYW5hZ2VyO1xyXG5cclxucHJvcGVydHltYW5hZ2VyPSBhbmd1bGFyLm1vZHVsZSgncHJvcGVydHltYW5hZ2VyQXBwJywgWyduZ1JvdXRlJywnYW5ndWxhclV0aWxzLmRpcmVjdGl2ZXMuZGlyUGFnaW5hdGlvbicsJ25nRGlhbG9nJywndGVtcGxhdGVzJywneGVkaXRhYmxlJ10gKTsgXHJcblxyXG5cclxuXHJcbiAgICBwcm9wZXJ0eW1hbmFnZXIuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJyxbJyR3aW5kb3cnLCckbG9jYXRpb24nLGZ1bmN0aW9uICggJHdpbmRvdywkbG9jYXRpb24pIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgaWYgKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4pIHtcclxuICAgICAgICBjb25maWcuaGVhZGVycy50b2tlbj0gICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICBlbHNle1xyXG4gICAgICAgICAgIC8vIG5vIHRva2VuIGluIFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91bmF0aG9yaXNlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICB9LFxyXG4gICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXHJcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91bmF0aG9yaXNlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XHJcbiAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcblxyXG5wcm9wZXJ0eW1hbmFnZXIuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCRodHRwUHJvdmlkZXIpe1xyXG4gIFxyXG4kaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuXHJcbiAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgLndoZW4oJy8nLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvZGFzaGJvYXJkLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnZGFzaGJvYXJkQ3RybCdcclxuICAgICAgICB9KSAgXHJcbiAgICAgIC53aGVuKCcvcHJvcGVydGllcycsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAncHJvcGVydHlfbWFuYWdlci92aWV3cy9wcm9wZXJ0aWVzLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnUHJvcGVydHlDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIC53aGVuKCcvZWRpdC1wcm9wZXJ0eS86cHJvcGVydHknLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ0VkaXRwcm9wZXJ0eS5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ0VkaXRQcm9wZXJ0eUN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgIC53aGVuKCcvdW5pdHMvOnByb3BlcnR5bmFtZS86cHJvcGVydHlpZCcsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAncHJvcGVydHlfbWFuYWdlci92aWV3cy91bml0cy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ3VuaXRDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL3VuaXRzLXNldHRpbmdzLzp1bml0bmFtZS86dW5pdGlkLzphbW91bnQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3VuaXQtc2V0dGluZ3MuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICd1bml0U2V0dGluZ3NDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL3RlbmFudHMnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvdGVuYW50cy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ3RlbmFudHNDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL2NoZWNrb3V0Lzp0ZW5hbnRpZCcsIHtcclxuICAgICAgICAgdGVtcGxhdGVVcmwgOiAnY2hlY2tvdXQuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICdjaGVja291dEN0cmwnXHJcbiAgICAgICAgfSlcclxuICAgICAgIC53aGVuKCcvY2hlY2tpbi86dGVuYW50aWQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ2NoZWNraW4uaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICdjaGVja2luQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy9zaW5nbGV0cnhuJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9wZXJ0eV9tYW5hZ2VyL3ZpZXdzL3NpbmdsZXRyeG4uaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICdzaW5nbGV0cnhuQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy9iYXRjaHRyeG4nLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvYmF0Y2h0cnhuLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnYmF0Y2h0cnhuQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvdW5hdGhvcmlzZWQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJzQwMS5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9ub3QtZm91bmQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJzQwNC5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICBcclxuIFxyXG4gICAgLm90aGVyd2lzZSh7IHJlZGlyZWN0VG8gOiAnL25vdC1mb3VuZCcgfSk7XHJcblxyXG4gIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgXHJcblxyXG59XSk7XHJcblxyXG5cclxucHJvcGVydHltYW5hZ2VyLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnLCckcm91dGUnLCdlZGl0YWJsZU9wdGlvbnMnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sJHdpbmRvdywkcm91dGUsZWRpdGFibGVPcHRpb25zKXtcclxuICAgZWRpdGFibGVPcHRpb25zLnRoZW1lID0gJ2JzMyc7IFxyXG5cclxuICAkcm9vdFNjb3BlLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcclxuXHJcblxyXG4gLy8gIHZhciBwYXRocz0gSlNPTi5wYXJzZSgkd2luZG93LnNlc3Npb25TdG9yYWdlLmFsbG93ZWRwYXRoKTtcclxuICAvLyBjb25zb2xlLmxvZyhcIm5leHQgXCIgKyBuZXh0KTtcclxuXHJcbiAgLy8gY29uc29sZS5sb2coXCJwYXRocyBcIiArIHBhdGhzKTtcclxuICAgdmFyIG5leHRQYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuIC8vICBjb25zb2xlLmxvZyhcIm5leHQgcGF0aCAgXCIgKyBuZXh0UGF0aCk7XHJcbiAgICAgICAgIC8qICBmdW5jdGlvbiBmaW5kQnlJZChzb3VyY2UsIGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgXHJcbiAgICAgIGlmIChmaW5kQnlJZChwYXRocyxuZXh0UGF0aCApKXtcclxuICAgICAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdW5hdGhvcmlzZWQnKTtcclxuICAgICAgICAvLyAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICBcclxuICAgICovXHJcblxyXG5cclxuXHJcbiAgIFxyXG4gIH0pO1xyXG4gIFxyXG5cclxufV0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJwcm9wZXJ0eW1hbmFnZXIuZmFjdG9yeSgncHJvcGVydHlNYW5hZ2VyU3J2JywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblxyXG4gdmFyIHVybD0nL3dlYi9wcm9wZXJ0eW1hbmFnZXInO1xyXG5cdHZhciBkYXRhID0ge1xyXG5cclxuXHRcdC8qICBQcm9wZXJ0eSAqL1xyXG4gICAgICAgICBwcm9wZXJ0eUV4aXN0OiBmdW5jdGlvbihwbG90bmFtZSkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvcHJvcGVydHkvY2hlY2svJytwbG90bmFtZSlcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCBnZXRNeVByb3BlcnRpZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvcHJvcGVydHknKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cclxuICAgICAgICAgYWRkUHJvcGVydHk6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAucG9zdCh1cmwgKyAnL3Byb3BlcnR5JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIGdldFByb3BlcnR5RGV0YWlsczogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5nZXQodXJsICsgJy9wcm9wZXJ0eS8nK2RldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgdXBkYXRlUHJvcGVydHk6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAucHV0KHVybCArICcvcHJvcGVydHknLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uKHByb3BlcnR5KSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLmRlbGV0ZSh1cmwgKyAnL3Byb3BlcnR5LycrcHJvcGVydHkpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHJcblx0XHQgLyogIFVuaXRzICAqL1xyXG5cclxuXHRcdExpc3RBbGxVbml0czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KHVybCsgJy9Vbml0L0FsbCcpXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgTGlzdFByb3BlcnR5VW5pdHM6IGZ1bmN0aW9uKHByb3BlcnR5aWQpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAkaHR0cC5nZXQodXJsKyAnL1VuaXQvJytwcm9wZXJ0eWlkKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cclxuXHJcblx0XHQgVW5pdEV4aXN0OiBmdW5jdGlvbih1bml0bmFtZSkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvVW5pdC9jaGVjay8nK3VuaXRuYW1lKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cdFxyXG4gICAgICAgICBhZGRVbml0OiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLnBvc3QodXJsICsgJy9Vbml0JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIGdldFVuaXREZXRhaWxzOiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLmdldCh1cmwgKyAnL1VuaXQnK2RldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgdXBkYXRlVW5pdDogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wdXQodXJsICsgJy9Vbml0JyxkZXRhaWxzKTsgXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcbiAgICAgICAgIFVwZGF0ZVVuaXRTZXR0aW5nczogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wdXQodXJsICsgJy9VcGRhdGVVbml0U2V0dGluZ3MnLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCBcclxuICAgICAgICAgZGVsZXRlVW5pdDogZnVuY3Rpb24odW5pdG5hbWUpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAuZGVsZXRlKHVybCArICcvVW5pdCcrdW5pdG5hbWUpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHRcdCAgdmFjYW50VW5pdHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5nZXQodXJsICsgJy92YWNhbnRVbml0cycpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHJcblx0ICAgICAgICBnZXRUZW5hbnREZXRhaWxzOmZ1bmN0aW9uICh0ZW5hbnRpZCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2lkLycrIHRlbmFudGlkKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGNoZWNrVGVuYW50Q29udGFjdDpmdW5jdGlvbiAoY29udGFjdCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2NvbnRhY3QvJysgY29udGFjdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50KSB7XHJcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2codGVuYW50KVxyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwgKyAnL1RlbmFudCcsdGVuYW50KTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICB0ZW5hbnRMb29rdXA6ZnVuY3Rpb24gKHNlYXJjaGlkLGxvb2t1cCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2xvb2t1cC8/c2VhcmNoaWQ9JytzZWFyY2hpZCsnJmxvb2t1cD0nK2xvb2t1cCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbmFudFVwZGF0ZTpmdW5jdGlvbiAoZGV0YWlscykge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucHV0KHVybCArICcvVGVuYW50JyxkZXRhaWxzKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGVuYW50TGlzdDpmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgIHJldHVybiAkaHR0cC5nZXQodXJsICsgJy9UZW5hbnQnKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIERlbGV0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50aWQpIHtcclxuXHRcdCAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSh1cmwgKyAnL1RlbmFudC8nK3RlbmFudGlkKTsgXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAgICAgY2hlY2tpbjogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wb3N0KHVybCArICcvY2hlY2tpbicsZGV0YWlscyk7IFxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCAgICB9LFxyXG5cclxuICAgICAgICAgICAgICB9XHJcblx0cmV0dXJuIGRhdGE7XHJcbn1dKTtcclxuIiwiXHJcblxyXG5wcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignY2hlY2tpbkN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywncHJvcGVydHlNYW5hZ2VyU3J2JywnJGxvY2F0aW9uJywnJHJvdXRlJywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLHByb3BlcnR5TWFuYWdlclNydiwkbG9jYXRpb24sJHJvdXRlKXtcclxuXHJcbiAgICRzY29wZS50ZW5hbnRpZD0kcm91dGUuY3VycmVudC5wYXJhbXMudGVuYW50aWQ7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgJHNjb3BlLmFzc2lnbmVkdW5pdHM9W107XHJcbiAkc2NvcGUuZHVlQW1vdW50PTA7XHJcbiAgIFxyXG5cclxuXHJcbiAgICBwcm9wZXJ0eU1hbmFnZXJTcnYudmFjYW50VW5pdHMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudmFjYW50dW5pdHM9ZGF0YS52YWNhbnR1bml0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+RXJyb3IgTGlzdGluZyBZb3VyIFZhY2FudCBVbml0cyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cclxuICAgICAgICAkc2NvcGUuYXNzaWdudW5pdD1mdW5jdGlvbihwcm9wKXtcclxuICAgICAgICAgICRzY29wZS5hc3NpZ25lZHVuaXRzLnB1c2gocHJvcCk7XHJcbiAgICAgICAgICAkc2NvcGUuZHVlQW1vdW50PSRzY29wZS5kdWVBbW91bnQrcHJvcC5hbW91bnQ7XHJcblxyXG4gICAgICAgIH0gOyAgIFxyXG5cclxuICAgICAgICAkc2NvcGUucmVtb3ZlYXNzaWdtZW50PWZ1bmN0aW9uKHNlbGVjdGlvbixpbmRleCl7XHJcbiAgICAgICAgICAgJHNjb3BlLmFzc2lnbmVkdW5pdHMuc3BsaWNlKGluZGV4LDEpXHJcbiAgICAgICAgICAgJHNjb3BlLmR1ZUFtb3VudD0kc2NvcGUuZHVlQW1vdW50LXNlbGVjdGlvbi5hbW91bnQ7XHJcblxyXG4gICAgICAgIH0gOyAgXHJcblxyXG4gICAgICAgICRzY29wZS5jaGVja2luPWZ1bmN0aW9uKCl7XHJcblxyXG5cclxuICAgICAgICAgICAgIHZhciBkZXRhaWxzPXt9O1xyXG4gICAgICAgICAgICAgICAgIGRldGFpbHMudW5pdHM9ICRzY29wZS5hc3NpZ25lZHVuaXRzO1xyXG4gICAgICAgICAgICAgICAgIGRldGFpbHMuYW1vdW50ZHVlPSRzY29wZS5kdWVBbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgZGV0YWlscy50ZW5hbnRpZD0kc2NvcGUudGVuYW50aWQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuY2hlY2tpbihkZXRhaWxzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5UZW5hbnQgQ2hlY2tlZCBJbiA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIENoZWNraW5nIGluIFRoZSBDbGllbnQgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHJcblxyXG4gICAgICAgIH0gOyAgICAgICAgICAgIFxyXG5cclxuXHR9XSk7IiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ2NoZWNrb3V0Q3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS50ZW5hbnRpZD0kcm91dGUuY3VycmVudC5wYXJhbXMudGVuYW50aWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TWFuYWdlclNydi5nZXRUZW5hbnREZXRhaWxzKCRzY29wZS50ZW5hbnRpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFx0ICAgIGlmIChkYXRhLmV4aXN0KXskc2NvcGUudGVuYW50c2RldGFpbHM9ZGF0YS50ZW5hbnRkZXRhaWxzO31cclxuICAgICAgICAgICAgICAgICAgICAgICBcdCAgICBlbHNlICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgXHQgICAgXHQgdmFyIHRlbXAgPSc8cD4gVGVuYW50IERvZXMgTm90IEV4aXN0IDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICBcdCAgICB9XHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+RXJyb3IgRmV0Y2hpbmcgVGVuYW50IERldGFpbHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuXHRcdH1dKTsiLCJcclxuXHJcbnByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCdkYXNoYm9hcmRDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2csJHdpbmRvdyl7XHJcblxyXG5cclxuICAgIFxyXG5cdH1dKTtcclxuIiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ0VkaXRQcm9wZXJ0eUN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywncHJvcGVydHlNYW5hZ2VyU3J2JywnJGxvY2F0aW9uJywnJHJvdXRlJywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLHByb3BlcnR5TWFuYWdlclNydiwkbG9jYXRpb24sJHJvdXRlKXtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eT1hbmd1bGFyLmZyb21Kc29uKGF0b2IoJHJvdXRlLmN1cnJlbnQucGFyYW1zLnByb3BlcnR5KSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlPWZ1bmN0aW9uKHByb3Ape1xyXG5cclxuICAgICAgICAgICAgXHRwcm9wZXJ0eU1hbmFnZXJTcnYudXBkYXRlUHJvcGVydHkocHJvcClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+UHJvcGVydHkgU3VjY2Vzc2Z1bGx5IFVwZGF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBVcGRhdGluZyBQcm9wZXJ0eSAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbD1mdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgXHQkbG9jYXRpb24ucGF0aCgnL3Byb3BlcnRpZXMnKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgXHJcblx0fV0pOyIsIlxyXG5wcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignTWFpbkN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywnJHdpbmRvdycsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZywkd2luZG93KXtcclxuXHJcblxyXG5cdCAkc2NvcGUucm9sZT0kd2luZG93LnNlc3Npb25TdG9yYWdlLnJvbGU7XHJcblx0ICRzY29wZS51c2VyPSR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubmFtZXM7XHJcblxyXG5cclxuXHJcbiAgICBcclxuXHR9XSk7XHJcbiIsIlxyXG5wcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignUHJvcGVydHlDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJ3Byb3BlcnR5TWFuYWdlclNydicsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZyxwcm9wZXJ0eU1hbmFnZXJTcnYsJGxvY2F0aW9uKXtcclxuXHJcbiAgXHJcblxyXG4gICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2LmdldE15UHJvcGVydGllcygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAkc2NvcGUucHJvcGVydGllcz1kYXRhLnByb3BlcnRpZXM7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgY29uc29sZS5sb2coKTtcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBMaXN0aW5nIFlvdXIgUHJvcGVydGllcyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICB9KTsgICBcclxuICAgICAgICAgICAkc2NvcGUuZWRpdHByb3BlcnR5PWZ1bmN0aW9uKHByb3BlcnR5KXtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgdmFyIGRldD1idG9hKGFuZ3VsYXIudG9Kc29uKHByb3BlcnR5KSk7XHJcblxyXG4gICAgICAgICBcdCAgICAkbG9jYXRpb24ucGF0aCgnL2VkaXQtcHJvcGVydHkvJytkZXQpO1xyXG4gICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgJHNjb3BlLnZpZXdQcm9wZXJ0eT1mdW5jdGlvbihwcm9wZXJ0eSl7XHJcbiAgICAgICAgIFx0ICAkc2NvcGUudmlld3Byb3BlcnR5PXByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ1ZpZXdwcm9wZXJ0eS5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZ2RpYWxvZy10aGVtZS1kZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICRzY29wZS5hZGRQcm9wZXJ0eT1mdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnQWRkcHJvcGVydHkuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb3A9dmFsdWU7XHJcbiAgICAgICAgICAgICAgICBcdHByb3BlcnR5TWFuYWdlclNydi5hZGRQcm9wZXJ0eSgkc2NvcGUucHJvcCkgXHJcbiAgICAgICAgICAgICAgICBcdCAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIFx0ICBcdCAgICAgICRzY29wZS5wcm9wZXJ0aWVzLnB1c2goJHNjb3BlLnByb3ApO1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPlByb3BlcnR5ICBTdWNjZXNzZnVsbHkgQ3JlYXRlZCA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBDcmVhdGluZyBQcm9wZXJ0eSAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFxyXG4gICAgICAgICAgICAgICAgXHRcdCAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuc2F2ZXByb3BlcnR5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIFxyXG5cdH1dKTtcclxuIiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ3RlbmFudHNDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJyR3aW5kb3cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2csJHdpbmRvdyxwcm9wZXJ0eU1hbmFnZXJTcnYpe1xyXG4gICAkc2NvcGUudGVuYW50cz1bXTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2LnRlbmFudExpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGVuYW50cz1kYXRhLnRlbmFudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIExpc3RpbmcgWW91ciBVbml0cyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cclxuXHJcbiAgICAkc2NvcGUuYWRkVGVuYW50PWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXHQgICBuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdBZGRUZW5hbnQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZW49dmFsdWU7XHJcbiAgICAgICAgICAgICAgICBcdHByb3BlcnR5TWFuYWdlclNydi5jcmVhdGVUZW5hbnQoJHNjb3BlLnRlbikgXHJcbiAgICAgICAgICAgICAgICBcdCAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIFx0ICBcdCAgICAgICRzY29wZS50ZW5hbnRzLnB1c2goJHNjb3BlLnRlbik7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+VGVuYW50ICBTdWNjZXNzZnVsbHkgQ3JlYXRlZCA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBTYXZpbmcgVGVuYW50ICBEZXRhaWxzIChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0XHJcbiAgICAgICAgICAgICAgICBcdFx0ICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG4gICAgXHJcblx0fV0pOyIsInByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCd1bml0Q3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAgICAgICAgICAkc2NvcGUucHJvcGVydHlpZD0kcm91dGUuY3VycmVudC5wYXJhbXMucHJvcGVydHlpZDtcclxuICAgICAgICAgICAkc2NvcGUucHJvcGVydHk9JHJvdXRlLmN1cnJlbnQucGFyYW1zLnByb3BlcnR5bmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLnVuaXRzPVtdO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2Lkxpc3RQcm9wZXJ0eVVuaXRzKCRzY29wZS5wcm9wZXJ0eWlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW5pdHM9ZGF0YS51bml0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS51bml0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+RXJyb3IgTGlzdGluZyBZb3VyIFVuaXRzIChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICB9KTsgXHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5hZGRVbml0PWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdBZGRVbml0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGVcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51bnQ9dmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVudC5wcm9wZXJ0eWlkPSRzY29wZS5wcm9wZXJ0eWlkO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51bnQucHJvcGVydHluYW1lPSRzY29wZS5wcm9wZXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW50Lm9jY3VwYXRpb25TdGF0dXM9XCJ2YWNhbnRcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2LmFkZFVuaXQoJHNjb3BlLnVudCkgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW5pdHMucHVzaCgkc2NvcGUudW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPlVuaXQgIFN1Y2Nlc3NmdWxseSBDcmVhdGVkIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBDcmVhdGluZyBVbml0IChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgXHJcbiAgICAgICAgICAgICAgIFxyXG5cdH1dKTsiLCJwcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcigndW5pdFNldHRpbmdzQ3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAkc2NvcGUuZGVwb3NpdD17fTtcclxuICAkc2NvcGUuc2V0dGluZ3M9e307XHJcblxyXG4gICAgICAgICAgICRzY29wZS51bml0aWQ9JHJvdXRlLmN1cnJlbnQucGFyYW1zLnVuaXRpZDtcclxuICAgICAgICAgICAkc2NvcGUudW5pdG5hbWU9JHJvdXRlLmN1cnJlbnQucGFyYW1zLnVuaXRuYW1lO1xyXG4gICAgICAgICAgICRzY29wZS5yZW50YW1vdW50PU51bWJlcigkcm91dGUuY3VycmVudC5wYXJhbXMuYW1vdW50KTtcclxuIFxyXG4gICAgJHNjb3BlLmNhbGNSZW50RGVwb3NpdD0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIFx0aWYgKHZhbHVlPT09J2RlcG9zaXRhbW91bnQnKXskc2NvcGUuZGVwb3NpdC5hbW91bnQ9JHNjb3BlLnJlbnRhbW91bnQ7fVxyXG4gICAgXHRlbHNlIGlmICh2YWx1ZT09PSdkZXBvc2l0cmVudHBlcmNlbnRhZ2UnKXtcclxuICAgICAgICBcdFx0JHNjb3BlLmRlcG9zaXQuYW1vdW50PSgkc2NvcGUucGVyY2VudGFnZSAqICRzY29wZS5yZW50YW1vdW50KS8xMDA7XHJcbiAgICBcdH1cclxuICAgIFx0ZWxzZSBpZih2YWx1ZT09PSdkZXBvc2l0Zml4ZWRhbW91bnQnKXskc2NvcGUuZGVwb3NpdC5hbW91bnQ9JHNjb3BlLmZpeGVkYW1vdW50O31cclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbGNDaGVja2luQW1vdW50ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdFx0ICAgICBpZiAodmFsdWU9PT0ncmVudG9ubHknKXskc2NvcGUuc2V0dGluZ3MuY2hlY2tpbmFtb3VudD0kc2NvcGUucmVudGFtb3VudDt9XHJcblx0XHRcdCAgICAgZWxzZSBpZiAodmFsdWU9PT0ncmVudGFuZGRlcG9zaXQnKXskc2NvcGUuc2V0dGluZ3MuY2hlY2tpbmFtb3VudD0kc2NvcGUuZGVwb3NpdC5hbW91bnQgKyAkc2NvcGUucmVudGFtb3VudDt9XHJcblx0XHRcdCAgICAgZWxzZSBpZiAodmFsdWU9PT0nY2hlY2tpbmZpeGVkYW1vdW50Jyl7JHNjb3BlLnNldHRpbmdzLmNoZWNraW5hbW91bnQ9JHNjb3BlLnRlbmFudGNoZWNraW5maXhlZGFtb3VudCA7fVxyXG5cdFx0XHQgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLnVwZGF0ZT1mdW5jdGlvbigpe1xyXG4gICAgICBcdCRzY29wZS51cGRhdGU9e307XHJcbiAgICAgIFx0JHNjb3BlLnVwZGF0ZS5zZXR0aW5ncz0kc2NvcGUuc2V0dGluZ3M7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZS5faWQ9JHNjb3BlLnVuaXRpZDtcclxuICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuVXBkYXRlVW5pdFNldHRpbmdzKCRzY29wZS51cGRhdGUpIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPlVuaXQgIFNldHRpbmdzIFN1Y2Nlc3NmdWxseSBDcmVhdGVkIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBDcmVhdGluZyBVbml0ICBTZXR0aW5ncyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICB9O1xyXG4gICAgXHJcblxyXG5cdFx0fV0pOyIsInByb3BlcnR5bWFuYWdlci5kaXJlY3RpdmUoJ2VyclNyYycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgZWxlbWVudC5iaW5kKCdlcnJvcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoYXR0cnMuc3JjICE9IGF0dHJzLmVyclNyYykge1xyXG4gICAgICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsIGF0dHJzLmVyclNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnbmdTcmMnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlICYmIGF0dHJzLmVyclNyYykge1xyXG4gICAgICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsIGF0dHJzLmVyclNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7IiwiICAgIHByb3BlcnR5bWFuYWdlci5kaXJlY3RpdmUoXCJuZ0ZpbGVNb2RlbFwiLCBbZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBuZ0ZpbGVNb2RlbDogXCI9XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmJpbmQoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGNoYW5nZUV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChsb2FkRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLm5nRmlsZU1vZGVsID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogY2hhbmdlRXZlbnQudGFyZ2V0LmZpbGVzWzBdLmxhc3RNb2RpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWREYXRlOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubGFzdE1vZGlmaWVkRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0uc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0udHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBsb2FkRXZlbnQudGFyZ2V0LnJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
