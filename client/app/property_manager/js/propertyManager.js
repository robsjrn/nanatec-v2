var propertymanager;propertymanager=angular.module("propertymanagerApp",["ngRoute","angularUtils.directives.dirPagination","ngDialog","templates","xeditable"]),propertymanager.factory("authInterceptor",["$window","$location",function(t,e){return{request:function(r){return r.headers=r.headers||{},t.sessionStorage.token?r.headers.token=t.sessionStorage.token:e.path("/unathorised"),r},response:function(t){return 401===t.status&&e.path("/unathorised"),t||$q.when(t)}}}]),propertymanager.config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,r){r.interceptors.push("authInterceptor"),t.when("/",{templateUrl:"property_manager/views/dashboard.html",controller:"dashboardCtrl"}).when("/properties",{templateUrl:"property_manager/views/properties.html",controller:"PropertyCtrl"}).when("/edit-property/:property",{templateUrl:"Editproperty.html",controller:"EditPropertyCtrl"}).when("/units/:propertyname/:propertyid",{templateUrl:"property_manager/views/units.html",controller:"unitCtrl"}).when("/units-settings/:unitname/:unitid/:amount",{templateUrl:"unit-settings.html",controller:"unitSettingsCtrl"}).when("/tenants",{templateUrl:"property_manager/views/tenants.html",controller:"tenantsCtrl"}).when("/singletrxn",{templateUrl:"property_manager/views/singletrxn.html",controller:"singletrxnCtrl"}).when("/batchtrxn",{templateUrl:"property_manager/views/batchtrxn.html",controller:"batchtrxnCtrl"}).when("/unathorised",{templateUrl:"401.html"}).when("/not-found",{templateUrl:"404.html"}).otherwise({redirectTo:"/not-found"})}]),propertymanager.run(["$rootScope","$location","$window","$route","editableOptions",function(t,e,r,n,o){o.theme="bs3",t.$on("$locationChangeStart",function(t,n,o){var a=JSON.parse(r.sessionStorage.allowedpath);console.log("paths "+a);e.path()})}]);
propertymanager.factory("propertyManagerSrv",["$http",function(t){var n="/web/propertymanager",e={propertyExist:function(e){var r=t.get(n+"/property/check/"+e);return r},getMyProperties:function(){var e=t.get(n+"/property");return e},addProperty:function(e){var r=t.post(n+"/property",e);return r},getPropertyDetails:function(e){var r=t.get(n+"/property/"+e);return r},updateProperty:function(e){var r=t.put(n+"/property",e);return r},deleteProperty:function(e){var r=t["delete"](n+"/property/"+e);return r},ListAllUnits:function(){var e=t.get(n+"/Unit/All");return e},ListPropertyUnits:function(e){var r=t.get(n+"/Unit/"+e);return r},UnitExist:function(e){var r=t.get(n+"/Unit/check/"+e);return r},addUnit:function(e){var r=t.post(n+"/Unit",e);return r},getUnitDetails:function(e){var r=t.get(n+"/Unit"+e);return r},updateUnit:function(e){var r=t.put(n+"/Unit",e);return r},deleteUnit:function(e){var r=t["delete"](n+"/Unit"+e);return r},checkTenantContact:function(e){return t.get(n+"/Tenant/contact/"+e)},createTenant:function(e){return console.log(e),t.post(n+"/Tenant",e)},tenantLookup:function(e,r){return t.get(n+"/Tenant/lookup/?searchid="+e+"&lookup="+r)},tenantUpdate:function(e){return t.put(n+"/Tenant",e)},tenantList:function(){return t.get(n+"/Tenant")},DeleteTenant:function(e){return t["delete"](n+"/Tenant/"+e)}};return e}]);
propertymanager.controller("dashboardCtrl",["$scope","ngDialog","$window",function(o,r,n){}]);
propertymanager.controller("EditPropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(r,t,p,e,o){r.property=angular.fromJson(atob(o.current.params.property)),r.update=function(r){p.updateProperty(r).success(function(r){var p="<p>Property Successfully Updated </p>";t.open({template:p,plain:!0})}).error(function(r){var p="<p>Error Updating Property (kindly Inform the Administrator) </p>";t.open({template:p,plain:!0})})},r.cancel=function(){e.path("/properties")}}]);
propertymanager.controller("MainCtrl",["$scope","ngDialog","$window",function(o,e,r){o.role=r.sessionStorage.role,o.user=r.sessionStorage.names}]);
propertymanager.controller("PropertyCtrl",["$scope","ngDialog","propertyManagerSrv","$location",function(r,e,t,o){t.getMyProperties().success(function(e){r.properties=e.properties,console.log()}).error(function(r){var t="<p>Error Listing Your Properties (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})}),r.editproperty=function(r){var e=btoa(angular.toJson(r));o.path("/edit-property/"+e)},r.viewProperty=function(t){r.viewproperty=t,e.openConfirm({template:"Viewproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(r){},function(r){})},r.addProperty=function(){e.openConfirm({template:"Addproperty.html",className:"ngdialog-theme-default",scope:r}).then(function(o){r.prop=o,t.addProperty(r.prop).success(function(t){r.properties.push(r.prop);var o="<p>Property  Successfully Created </p>";e.open({template:o,plain:!0})}).error(function(r){var t="<p>Error Creating Property (kindly Inform the Administrator) </p>";e.open({template:t,plain:!0})})},function(r){})},r.saveproperty=function(){}}]);
propertymanager.controller("tenantsCtrl",["$scope","ngDialog","$window","propertyManagerSrv",function(n,t,e,a){n.tenants=[],a.tenantList().success(function(t){n.tenants=t.tenants,console.log(t)}).error(function(n){var e="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})}),n.addTenant=function(){t.openConfirm({template:"AddTenant.html",className:"ngdialog-theme-default",scope:n}).then(function(e){console.log(e),n.ten=e,a.createTenant(n.ten).success(function(e){n.tenants.push(n.ten);var a="<p>Tenant  Successfully Created </p>";t.open({template:a,plain:!0})}).error(function(n){var e="<p>Error Saving Tenant  Details (kindly Inform the Administrator) </p>";t.open({template:e,plain:!0})})},function(n){})}}]);
propertymanager.controller("unitCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(t,n,r,e,o){t.propertyid=o.current.params.propertyid,t.property=o.current.params.propertyname,t.units=[],r.ListPropertyUnits(t.propertyid).success(function(n){t.units=n.units,console.log(n.units)}).error(function(t){var r="<p>Error Listing Your Units (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})}),t.addUnit=function(){n.openConfirm({template:"AddUnit.html",className:"ngdialog-theme-default",scope:t}).then(function(e){t.unt=e,t.unt.propertyid=t.propertyid,t.unt.booked=!1,console.log(t.unt),r.addUnit(t.unt).success(function(r){t.units.push(t.unt);var e="<p>Unit  Successfully Created </p>";n.open({template:e,plain:!0})}).error(function(t){var r="<p>Error Creating Property (kindly Inform the Administrator) </p>";n.open({template:r,plain:!0})})},function(t){})}}]);
propertymanager.controller("unitSettingsCtrl",["$scope","ngDialog","propertyManagerSrv","$location","$route",function(n,t,r,a,o){n.calc=angular.noop,n.unitid=o.current.params.unitid,n.unitname=o.current.params.unitname,n.amount=o.current.params.amount,n.calcRentDeposit=function(n){console.log(n)}}]);
propertymanager.directive("errSrc",function(){return{link:function(r,e,c){e.bind("error",function(){c.src!=c.errSrc&&c.$set("src",c.errSrc)}),c.$observe("ngSrc",function(r){!r&&c.errSrc&&c.$set("src",c.errSrc)})}}});
propertymanager.directive("ngFileModel",[function(){return{scope:{ngFileModel:"="},link:function(e,t,i){t.bind("change",function(t){var i=new FileReader;i.onload=function(i){e.$apply(function(){e.ngFileModel={lastModified:t.target.files[0].lastModified,lastModifiedDate:t.target.files[0].lastModifiedDate,name:t.target.files[0].name,size:t.target.files[0].size,type:t.target.files[0].type,data:i.target.result}})},i.readAsDataURL(t.target.files[0])})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3BlcnR5X21hbmFnZXJfYXBwLmpzIiwiaHR0cFNlcnZpY2UuanMiLCJkYXNoYm9hcmRDdHJsLmpzIiwiRWRpdFByb3BlcnR5Q29udHJvbGxlci5qcyIsIm1haW5Db250cm9sbGVyLmpzIiwicHJvcGVydHlDb250cm9sbGVyLmpzIiwiVGVuYW50c0NvbnRyb2xsZXIuanMiLCJVbml0Q3RybC5qcyIsIlVuaXRzU2V0dGluZ3NDdHJsLmpzIiwiaW1hZ2VFcnJvci5qcyIsImlucHV0ZmlsZS5qcyJdLCJuYW1lcyI6WyJwcm9wZXJ0eW1hbmFnZXIiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCIkbG9jYXRpb24iLCJyZXF1ZXN0IiwiY29uZmlnIiwiaGVhZGVycyIsInNlc3Npb25TdG9yYWdlIiwidG9rZW4iLCJwYXRoIiwicmVzcG9uc2UiLCJzdGF0dXMiLCIkcSIsIndoZW4iLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImludGVyY2VwdG9ycyIsInB1c2giLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwicnVuIiwiJHJvb3RTY29wZSIsIiRyb3V0ZSIsImVkaXRhYmxlT3B0aW9ucyIsInRoZW1lIiwiJG9uIiwiZXZlbnQiLCJuZXh0IiwiY3VycmVudCIsInBhdGhzIiwiSlNPTiIsInBhcnNlIiwiYWxsb3dlZHBhdGgiLCJjb25zb2xlIiwibG9nIiwiJGh0dHAiLCJ1cmwiLCJkYXRhIiwicHJvcGVydHlFeGlzdCIsInBsb3RuYW1lIiwicHJvbWlzZSIsImdldCIsImdldE15UHJvcGVydGllcyIsImFkZFByb3BlcnR5IiwiZGV0YWlscyIsInBvc3QiLCJnZXRQcm9wZXJ0eURldGFpbHMiLCJ1cGRhdGVQcm9wZXJ0eSIsInB1dCIsImRlbGV0ZVByb3BlcnR5IiwicHJvcGVydHkiLCJMaXN0QWxsVW5pdHMiLCJMaXN0UHJvcGVydHlVbml0cyIsInByb3BlcnR5aWQiLCJVbml0RXhpc3QiLCJ1bml0bmFtZSIsImFkZFVuaXQiLCJnZXRVbml0RGV0YWlscyIsInVwZGF0ZVVuaXQiLCJkZWxldGVVbml0IiwiY2hlY2tUZW5hbnRDb250YWN0IiwiY29udGFjdCIsImNyZWF0ZVRlbmFudCIsInRlbmFudCIsInRlbmFudExvb2t1cCIsInNlYXJjaGlkIiwibG9va3VwIiwidGVuYW50VXBkYXRlIiwidGVuYW50TGlzdCIsIkRlbGV0ZVRlbmFudCIsInRlbmFudGlkIiwiJHNjb3BlIiwibmdEaWFsb2ciLCJwcm9wZXJ0eU1hbmFnZXJTcnYiLCJmcm9tSnNvbiIsImF0b2IiLCJwYXJhbXMiLCJ1cGRhdGUiLCJwcm9wIiwic3VjY2VzcyIsInRlbXAiLCJvcGVuIiwidGVtcGxhdGUiLCJwbGFpbiIsImVycm9yIiwiY2FuY2VsIiwicm9sZSIsInVzZXIiLCJuYW1lcyIsInByb3BlcnRpZXMiLCJlZGl0cHJvcGVydHkiLCJkZXQiLCJidG9hIiwidG9Kc29uIiwidmlld1Byb3BlcnR5Iiwidmlld3Byb3BlcnR5Iiwib3BlbkNvbmZpcm0iLCJjbGFzc05hbWUiLCJzY29wZSIsInRoZW4iLCJ2YWx1ZSIsInJlYXNvbiIsInNhdmVwcm9wZXJ0eSIsInRlbmFudHMiLCJhZGRUZW5hbnQiLCJ0ZW4iLCJwcm9wZXJ0eW5hbWUiLCJ1bml0cyIsInVudCIsImJvb2tlZCIsImNhbGMiLCJub29wIiwidW5pdGlkIiwiYW1vdW50IiwiY2FsY1JlbnREZXBvc2l0IiwiZGlyZWN0aXZlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJzcmMiLCJlcnJTcmMiLCIkc2V0IiwiJG9ic2VydmUiLCJuZ0ZpbGVNb2RlbCIsImF0dHJpYnV0ZXMiLCJjaGFuZ2VFdmVudCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJsb2FkRXZlbnQiLCIkYXBwbHkiLCJsYXN0TW9kaWZpZWQiLCJ0YXJnZXQiLCJmaWxlcyIsImxhc3RNb2RpZmllZERhdGUiLCJuYW1l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U0FBU2QsR0FDL0JuRSxRQUFRQyxJQUFJa0U7QUNUbkJ6RyxnQkFBZ0J3SCxVQUFVLFNBQVUsV0FDOUIsT0FDRUMsS0FBTSxTQUFTbEIsRUFBT21CLEVBQVNDLEdBQzdCRCxFQUFRRSxLQUFLLFFBQVMsV0FDaEJELEVBQU1FLEtBQU9GLEVBQU1HLFFBQ3JCSCxFQUFNSSxLQUFLLE1BQU9KLEVBQU1HLFVBSTVCSCxFQUFNSyxTQUFTLFFBQVMsU0FBU3ZCLElBQzFCQSxHQUFTa0IsRUFBTUcsUUFDbEJILEVBQU1JLEtBQUssTUFBT0osRUFBTUc7QUNYbEM5SCxnQkFBZ0J3SCxVQUFVLGVBQWdCLFdBQ3RDLE9BQ0lqQixPQUNJMEIsWUFBYSxLQUVqQlIsS0FBTSxTQUFVbEIsRUFBT21CLEVBQVNRLEdBQzVCUixFQUFRRSxLQUFLLFNBQVUsU0FBVU8sR0FDN0IsR0FBSUMsR0FBUyxHQUFJQyxXQUNqQkQsR0FBT0UsT0FBUyxTQUFVQyxHQUN0QmhDLEVBQU1pQyxPQUFPLFdBQ1RqQyxFQUFNMEIsYUFDRlEsYUFBY04sRUFBWU8sT0FBT0MsTUFBTSxHQUFHRixhQUMxQ0csaUJBQWtCVCxFQUFZTyxPQUFPQyxNQUFNLEdBQUdDLGlCQUM5Q0MsS0FBTVYsRUFBWU8sT0FBT0MsTUFBTSxHQUFHRSxLQUNsQ0MsS0FBTVgsRUFBWU8sT0FBT0MsTUFBTSxHQUFHRyxLQUNsQ0MsS0FBTVosRUFBWU8sT0FBT0MsTUFBTSxHQUFHSSxLQUNsQ3JHLEtBQU02RixFQUFVRyxPQUFPTSxXQUluQ1osRUFBT2EsY0FBY2QsRUFBWU8sT0FBT0MsTUFBTSIsImZpbGUiOiJwcm9wZXJ0eU1hbmFnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxudmFyIHByb3BlcnR5bWFuYWdlcjtcclxuXHJcbnByb3BlcnR5bWFuYWdlcj0gYW5ndWxhci5tb2R1bGUoJ3Byb3BlcnR5bWFuYWdlckFwcCcsIFsnbmdSb3V0ZScsJ2FuZ3VsYXJVdGlscy5kaXJlY3RpdmVzLmRpclBhZ2luYXRpb24nLCduZ0RpYWxvZycsJ3RlbXBsYXRlcycsJ3hlZGl0YWJsZSddICk7IFxyXG5cclxuXHJcblxyXG4gICAgcHJvcGVydHltYW5hZ2VyLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsWyckd2luZG93JywnJGxvY2F0aW9uJyxmdW5jdGlvbiAoICR3aW5kb3csJGxvY2F0aW9uKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgIGlmICgkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuKSB7XHJcbiAgICAgICAgY29uZmlnLmhlYWRlcnMudG9rZW49ICAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAvLyBubyB0b2tlbiBpbiBTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdW5hdGhvcmlzZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgfSxcclxuICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxyXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdW5hdGhvcmlzZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG5cclxucHJvcGVydHltYW5hZ2VyLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwkaHR0cFByb3ZpZGVyKXtcclxuICBcclxuJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJyk7XHJcblxyXG4gICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgIC53aGVuKCcvJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9wZXJ0eV9tYW5hZ2VyL3ZpZXdzL2Rhc2hib2FyZC5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ2Rhc2hib2FyZEN0cmwnXHJcbiAgICAgICAgfSkgIFxyXG4gICAgICAud2hlbignL3Byb3BlcnRpZXMnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvcHJvcGVydGllcy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXIgIDogJ1Byb3BlcnR5Q3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAud2hlbignL2VkaXQtcHJvcGVydHkvOnByb3BlcnR5Jywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdFZGl0cHJvcGVydHkuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICdFZGl0UHJvcGVydHlDdHJsJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAud2hlbignL3VuaXRzLzpwcm9wZXJ0eW5hbWUvOnByb3BlcnR5aWQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvdW5pdHMuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICd1bml0Q3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy91bml0cy1zZXR0aW5ncy86dW5pdG5hbWUvOnVuaXRpZC86YW1vdW50Jywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICd1bml0LXNldHRpbmdzLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAndW5pdFNldHRpbmdzQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy90ZW5hbnRzJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9wZXJ0eV9tYW5hZ2VyL3ZpZXdzL3RlbmFudHMuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICd0ZW5hbnRzQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy9zaW5nbGV0cnhuJywge1xyXG4gICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9wZXJ0eV9tYW5hZ2VyL3ZpZXdzL3NpbmdsZXRyeG4uaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyICA6ICdzaW5nbGV0cnhuQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgLndoZW4oJy9iYXRjaHRyeG4nLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3Byb3BlcnR5X21hbmFnZXIvdmlld3MvYmF0Y2h0cnhuLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlciAgOiAnYmF0Y2h0cnhuQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvdW5hdGhvcmlzZWQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJzQwMS5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9ub3QtZm91bmQnLCB7XHJcbiAgICAgICAgIHRlbXBsYXRlVXJsIDogJzQwNC5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICBcclxuIFxyXG4gICAgLm90aGVyd2lzZSh7IHJlZGlyZWN0VG8gOiAnL25vdC1mb3VuZCcgfSk7XHJcblxyXG4gIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgXHJcblxyXG59XSk7XHJcblxyXG5cclxucHJvcGVydHltYW5hZ2VyLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnLCckcm91dGUnLCdlZGl0YWJsZU9wdGlvbnMnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sJHdpbmRvdywkcm91dGUsZWRpdGFibGVPcHRpb25zKXtcclxuICAgZWRpdGFibGVPcHRpb25zLnRoZW1lID0gJ2JzMyc7IFxyXG5cclxuICAkcm9vdFNjb3BlLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcclxuXHJcblxyXG4gICB2YXIgcGF0aHM9IEpTT04ucGFyc2UoJHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5hbGxvd2VkcGF0aCk7XHJcbiAgLy8gY29uc29sZS5sb2coXCJuZXh0IFwiICsgbmV4dCk7XHJcblxyXG4gICBjb25zb2xlLmxvZyhcInBhdGhzIFwiICsgcGF0aHMpO1xyXG4gICB2YXIgbmV4dFBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xyXG4gLy8gIGNvbnNvbGUubG9nKFwibmV4dCBwYXRoICBcIiArIG5leHRQYXRoKTtcclxuICAgICAgICAgLyogIGZ1bmN0aW9uIGZpbmRCeUlkKHNvdXJjZSwgaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VbaV0gPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICBcclxuICAgICAgaWYgKGZpbmRCeUlkKHBhdGhzLG5leHRQYXRoICkpe1xyXG4gICAgICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91bmF0aG9yaXNlZCcpO1xyXG4gICAgICAgIC8vICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgIFxyXG4gICAgKi9cclxuXHJcblxyXG5cclxuICAgXHJcbiAgfSk7XHJcbiAgXHJcblxyXG59XSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInByb3BlcnR5bWFuYWdlci5mYWN0b3J5KCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcclxuXHJcbiB2YXIgdXJsPScvd2ViL3Byb3BlcnR5bWFuYWdlcic7XHJcblx0dmFyIGRhdGEgPSB7XHJcblxyXG5cdFx0LyogIFByb3BlcnR5ICovXHJcbiAgICAgICAgIHByb3BlcnR5RXhpc3Q6IGZ1bmN0aW9uKHBsb3RuYW1lKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KHVybCsgJy9wcm9wZXJ0eS9jaGVjay8nK3Bsb3RuYW1lKVxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cdFx0IGdldE15UHJvcGVydGllczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KHVybCsgJy9wcm9wZXJ0eScpXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcblxyXG4gICAgICAgICBhZGRQcm9wZXJ0eTogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wb3N0KHVybCArICcvcHJvcGVydHknLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgZ2V0UHJvcGVydHlEZXRhaWxzOiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLmdldCh1cmwgKyAnL3Byb3BlcnR5LycrZGV0YWlscyk7IFxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG4gICAgICAgICB1cGRhdGVQcm9wZXJ0eTogZnVuY3Rpb24oZGV0YWlscykge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICAkaHR0cC5wdXQodXJsICsgJy9wcm9wZXJ0eScsZGV0YWlscyk7IFxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG4gICAgICAgICBkZWxldGVQcm9wZXJ0eTogZnVuY3Rpb24ocHJvcGVydHkpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAuZGVsZXRlKHVybCArICcvcHJvcGVydHkvJytwcm9wZXJ0eSk7IFxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG5cclxuXHRcdCAvKiAgVW5pdHMgICovXHJcblxyXG5cdFx0TGlzdEFsbFVuaXRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAkaHR0cC5nZXQodXJsKyAnL1VuaXQvQWxsJylcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICBMaXN0UHJvcGVydHlVbml0czogZnVuY3Rpb24ocHJvcGVydHlpZCkge1xyXG5cdFx0XHR2YXIgcHJvbWlzZSA9ICRodHRwLmdldCh1cmwrICcvVW5pdC8nK3Byb3BlcnR5aWQpXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcblxyXG5cclxuXHRcdCBVbml0RXhpc3Q6IGZ1bmN0aW9uKHVuaXRuYW1lKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KHVybCsgJy9Vbml0L2NoZWNrLycrdW5pdG5hbWUpXHJcblx0XHRcdHJldHVybiBwcm9taXNlO1xyXG5cdFx0IH0sXHJcblx0XHJcbiAgICAgICAgIGFkZFVuaXQ6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAucG9zdCh1cmwgKyAnL1VuaXQnLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgZ2V0VW5pdERldGFpbHM6IGZ1bmN0aW9uKGRldGFpbHMpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAuZ2V0KHVybCArICcvVW5pdCcrZGV0YWlscyk7IFxyXG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuXHRcdCB9LFxyXG4gICAgICAgICB1cGRhdGVVbml0OiBmdW5jdGlvbihkZXRhaWxzKSB7XHJcblx0XHRcdHZhciBwcm9taXNlID0gICRodHRwLnB1dCh1cmwgKyAnL1VuaXQnLGRldGFpbHMpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuICAgICAgICAgZGVsZXRlVW5pdDogZnVuY3Rpb24odW5pdG5hbWUpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSAgJGh0dHAuZGVsZXRlKHVybCArICcvVW5pdCcrdW5pdG5hbWUpOyBcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHQgfSxcclxuXHJcblx0XHJcbiAgICAgICAgICAgIGNoZWNrVGVuYW50Q29udGFjdDpmdW5jdGlvbiAoY29udGFjdCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2NvbnRhY3QvJysgY29udGFjdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNyZWF0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50KSB7XHJcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2codGVuYW50KVxyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwgKyAnL1RlbmFudCcsdGVuYW50KTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICB0ZW5hbnRMb29rdXA6ZnVuY3Rpb24gKHNlYXJjaGlkLGxvb2t1cCkge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCArICcvVGVuYW50L2xvb2t1cC8/c2VhcmNoaWQ9JytzZWFyY2hpZCsnJmxvb2t1cD0nK2xvb2t1cCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbmFudFVwZGF0ZTpmdW5jdGlvbiAoZGV0YWlscykge1xyXG5cdFx0ICAgICByZXR1cm4gJGh0dHAucHV0KHVybCArICcvVGVuYW50JyxkZXRhaWxzKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGVuYW50TGlzdDpmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgIHJldHVybiAkaHR0cC5nZXQodXJsICsgJy9UZW5hbnQnKTsgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIERlbGV0ZVRlbmFudDpmdW5jdGlvbiAodGVuYW50aWQpIHtcclxuXHRcdCAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSh1cmwgKyAnL1RlbmFudC8nK3RlbmFudGlkKTsgXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgIH1cclxuXHRyZXR1cm4gZGF0YTtcclxufV0pO1xyXG4iLCJcclxuXHJcbnByb3BlcnR5bWFuYWdlci5jb250cm9sbGVyKCdkYXNoYm9hcmRDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2csJHdpbmRvdyl7XHJcblxyXG5cclxuICAgIFxyXG5cdH1dKTtcclxuIiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ0VkaXRQcm9wZXJ0eUN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywncHJvcGVydHlNYW5hZ2VyU3J2JywnJGxvY2F0aW9uJywnJHJvdXRlJywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLHByb3BlcnR5TWFuYWdlclNydiwkbG9jYXRpb24sJHJvdXRlKXtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eT1hbmd1bGFyLmZyb21Kc29uKGF0b2IoJHJvdXRlLmN1cnJlbnQucGFyYW1zLnByb3BlcnR5KSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlPWZ1bmN0aW9uKHByb3Ape1xyXG5cclxuICAgICAgICAgICAgXHRwcm9wZXJ0eU1hbmFnZXJTcnYudXBkYXRlUHJvcGVydHkocHJvcClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+UHJvcGVydHkgU3VjY2Vzc2Z1bGx5IFVwZGF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBVcGRhdGluZyBQcm9wZXJ0eSAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbD1mdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgXHQkbG9jYXRpb24ucGF0aCgnL3Byb3BlcnRpZXMnKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgXHJcblx0fV0pOyIsIlxyXG5wcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignTWFpbkN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywnJHdpbmRvdycsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZywkd2luZG93KXtcclxuXHJcblxyXG5cdCAkc2NvcGUucm9sZT0kd2luZG93LnNlc3Npb25TdG9yYWdlLnJvbGU7XHJcblx0ICRzY29wZS51c2VyPSR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubmFtZXM7XHJcblxyXG5cclxuXHJcbiAgICBcclxuXHR9XSk7XHJcbiIsIlxyXG5wcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcignUHJvcGVydHlDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJ3Byb3BlcnR5TWFuYWdlclNydicsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCRzY29wZSxuZ0RpYWxvZyxwcm9wZXJ0eU1hbmFnZXJTcnYsJGxvY2F0aW9uKXtcclxuXHJcbiAgXHJcblxyXG4gICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2LmdldE15UHJvcGVydGllcygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAkc2NvcGUucHJvcGVydGllcz1kYXRhLnByb3BlcnRpZXM7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgY29uc29sZS5sb2coKTtcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBMaXN0aW5nIFlvdXIgUHJvcGVydGllcyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICB9KTsgICBcclxuICAgICAgICAgICAkc2NvcGUuZWRpdHByb3BlcnR5PWZ1bmN0aW9uKHByb3BlcnR5KXtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgdmFyIGRldD1idG9hKGFuZ3VsYXIudG9Kc29uKHByb3BlcnR5KSk7XHJcblxyXG4gICAgICAgICBcdCAgICAkbG9jYXRpb24ucGF0aCgnL2VkaXQtcHJvcGVydHkvJytkZXQpO1xyXG4gICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgJHNjb3BlLnZpZXdQcm9wZXJ0eT1mdW5jdGlvbihwcm9wZXJ0eSl7XHJcbiAgICAgICAgIFx0ICAkc2NvcGUudmlld3Byb3BlcnR5PXByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ1ZpZXdwcm9wZXJ0eS5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZ2RpYWxvZy10aGVtZS1kZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICRzY29wZS5hZGRQcm9wZXJ0eT1mdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnQWRkcHJvcGVydHkuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb3A9dmFsdWU7XHJcbiAgICAgICAgICAgICAgICBcdHByb3BlcnR5TWFuYWdlclNydi5hZGRQcm9wZXJ0eSgkc2NvcGUucHJvcCkgXHJcbiAgICAgICAgICAgICAgICBcdCAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIFx0ICBcdCAgICAgICRzY29wZS5wcm9wZXJ0aWVzLnB1c2goJHNjb3BlLnByb3ApO1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPlByb3BlcnR5ICBTdWNjZXNzZnVsbHkgQ3JlYXRlZCA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KVxyXG5cdFx0XHRcdCAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBDcmVhdGluZyBQcm9wZXJ0eSAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFxyXG4gICAgICAgICAgICAgICAgXHRcdCAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuc2F2ZXByb3BlcnR5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIFxyXG5cdH1dKTtcclxuIiwicHJvcGVydHltYW5hZ2VyLmNvbnRyb2xsZXIoJ3RlbmFudHNDdHJsJywgWyckc2NvcGUnLCduZ0RpYWxvZycsJyR3aW5kb3cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2csJHdpbmRvdyxwcm9wZXJ0eU1hbmFnZXJTcnYpe1xyXG4gICAkc2NvcGUudGVuYW50cz1bXTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgcHJvcGVydHlNYW5hZ2VyU3J2LnRlbmFudExpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGVuYW50cz1kYXRhLnRlbmFudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBMaXN0aW5nIFlvdXIgVW5pdHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHJcblxyXG4gICAgJHNjb3BlLmFkZFRlbmFudD1mdW5jdGlvbigpe1xyXG5cclxuICAgIFx0ICAgbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnQWRkVGVuYW50Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGVcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGVuPXZhbHVlO1xyXG4gICAgICAgICAgICAgICAgXHRwcm9wZXJ0eU1hbmFnZXJTcnYuY3JlYXRlVGVuYW50KCRzY29wZS50ZW4pIFxyXG4gICAgICAgICAgICAgICAgXHQgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBcdCAgXHQgICAgICAkc2NvcGUudGVuYW50cy5wdXNoKCRzY29wZS50ZW4pO1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPlRlbmFudCAgU3VjY2Vzc2Z1bGx5IENyZWF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0ICAgICAgICAgICAgfSlcclxuXHRcdFx0XHQgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+RXJyb3IgU2F2aW5nIFRlbmFudCAgRGV0YWlscyAoa2luZGx5IEluZm9ybSB0aGUgQWRtaW5pc3RyYXRvcikgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHRcdFx0XHQgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFxyXG4gICAgICAgICAgICAgICAgXHRcdCAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuICAgIFxyXG5cdH1dKTsiLCJwcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcigndW5pdEN0cmwnLCBbJyRzY29wZScsJ25nRGlhbG9nJywncHJvcGVydHlNYW5hZ2VyU3J2JywnJGxvY2F0aW9uJywnJHJvdXRlJywgZnVuY3Rpb24oJHNjb3BlLG5nRGlhbG9nLHByb3BlcnR5TWFuYWdlclNydiwkbG9jYXRpb24sJHJvdXRlKXtcclxuXHJcbiAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5aWQ9JHJvdXRlLmN1cnJlbnQucGFyYW1zLnByb3BlcnR5aWQ7XHJcbiAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5PSRyb3V0ZS5jdXJyZW50LnBhcmFtcy5wcm9wZXJ0eW5hbWU7XHJcbiAgICAgICAgICAgICRzY29wZS51bml0cz1bXTtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5TWFuYWdlclNydi5MaXN0UHJvcGVydHlVbml0cygkc2NvcGUucHJvcGVydHlpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVuaXRzPWRhdGEudW5pdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnVuaXRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSc8cD5FcnJvciBMaXN0aW5nIFlvdXIgVW5pdHMgKGtpbmRseSBJbmZvcm0gdGhlIEFkbWluaXN0cmF0b3IpIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFkZFVuaXQ9ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ0FkZFVuaXQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVudD12YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW50LnByb3BlcnR5aWQ9JHNjb3BlLnByb3BlcnR5aWRcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudW50LmJvb2tlZD1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudW50KTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU1hbmFnZXJTcnYuYWRkVW5pdCgkc2NvcGUudW50KSBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51bml0cy5wdXNoKCRzY29wZS51bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0nPHA+VW5pdCAgU3VjY2Vzc2Z1bGx5IENyZWF0ZWQgPC9wPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9JzxwPkVycm9yIENyZWF0aW5nIFByb3BlcnR5IChraW5kbHkgSW5mb3JtIHRoZSBBZG1pbmlzdHJhdG9yKSA8L3A+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgXHJcbiAgICAgICAgICAgICAgIFxyXG5cdH1dKTsiLCJwcm9wZXJ0eW1hbmFnZXIuY29udHJvbGxlcigndW5pdFNldHRpbmdzQ3RybCcsIFsnJHNjb3BlJywnbmdEaWFsb2cnLCdwcm9wZXJ0eU1hbmFnZXJTcnYnLCckbG9jYXRpb24nLCckcm91dGUnLCBmdW5jdGlvbigkc2NvcGUsbmdEaWFsb2cscHJvcGVydHlNYW5hZ2VyU3J2LCRsb2NhdGlvbiwkcm91dGUpe1xyXG5cclxuICAkc2NvcGUuY2FsYz0gYW5ndWxhci5ub29wO1xyXG5cclxuICAgICAgICAgICAkc2NvcGUudW5pdGlkPSRyb3V0ZS5jdXJyZW50LnBhcmFtcy51bml0aWQ7XHJcbiAgICAgICAgICAgJHNjb3BlLnVuaXRuYW1lPSRyb3V0ZS5jdXJyZW50LnBhcmFtcy51bml0bmFtZTtcclxuICAgICAgICAgICAkc2NvcGUuYW1vdW50PSRyb3V0ZS5jdXJyZW50LnBhcmFtcy5hbW91bnQ7XHJcbiBcclxuICAgICRzY29wZS5jYWxjUmVudERlcG9zaXQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgfTtcclxuXHJcblxyXG5cdFx0fV0pOyIsInByb3BlcnR5bWFuYWdlci5kaXJlY3RpdmUoJ2VyclNyYycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgZWxlbWVudC5iaW5kKCdlcnJvcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoYXR0cnMuc3JjICE9IGF0dHJzLmVyclNyYykge1xyXG4gICAgICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsIGF0dHJzLmVyclNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnbmdTcmMnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlICYmIGF0dHJzLmVyclNyYykge1xyXG4gICAgICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsIGF0dHJzLmVyclNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7IiwiICAgIHByb3BlcnR5bWFuYWdlci5kaXJlY3RpdmUoXCJuZ0ZpbGVNb2RlbFwiLCBbZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBuZ0ZpbGVNb2RlbDogXCI9XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmJpbmQoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGNoYW5nZUV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChsb2FkRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLm5nRmlsZU1vZGVsID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogY2hhbmdlRXZlbnQudGFyZ2V0LmZpbGVzWzBdLmxhc3RNb2RpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWREYXRlOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubGFzdE1vZGlmaWVkRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0uc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0udHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBsb2FkRXZlbnQudGFyZ2V0LnJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGNoYW5nZUV2ZW50LnRhcmdldC5maWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=